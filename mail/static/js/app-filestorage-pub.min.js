!function(a,b,c){"use strict";function d(){this.ie=/msie/.test(navigator.userAgent.toLowerCase())&&!b.opera,this.ie8AndBelow=this.ie&&this.getIeVersion()<=8,this.ie9AndBelow=this.ie&&this.getIeVersion()<=9,this.opera=!!b.opera,this.firefox=/firefox/.test(navigator.userAgent.toLowerCase()),this.chrome=/chrome/.test(navigator.userAgent.toLowerCase()),this.chromeIos=/crios/.test(navigator.userAgent.toLowerCase()),this.safari=/safari/.test(navigator.userAgent.toLowerCase())&&!this.chromeIos}function e(){this.sUrl="?/Ajax/",this.aRequests=[]}function f(b,d,e,f,g,h,i,j,k,l){this.fBeforeSelectCallback=null,this.fSelectCallback=d||function(){},this.fDeleteCallback=e||function(){},this.fDblClickCallback=!C&&f?f:function(){},this.fEnterCallback=g||function(){},this.bResetCheckedOnClick=w.isUnd(i)?!1:!!i,this.bCheckOnSelect=w.isUnd(j)?!1:!!j,this.bUnselectOnCtrl=w.isUnd(k)?!1:!!k,this.bDisableMultiplySelection=w.isUnd(l)?!1:!!l,this.useKeyboardKeys=c.observable(!1),this.list=c.observableArray([]),b&&b.subscribe&&b.subscribe(function(a){this.list(a)},this),this.multiplyLineFactor=h,this.oLast=null,this.oListScope=null,this.oScrollScope=null,this.iTimer=0,this.iFactor=1,this.KeyUp=v.Key.Up,this.KeyDown=v.Key.Down,this.KeyLeft=v.Key.Up,this.KeyRight=v.Key.Down,this.multiplyLineFactor&&(this.multiplyLineFactor.subscribe?this.multiplyLineFactor.subscribe(function(a){this.iFactor=a>0?a:1},this):this.iFactor=w.pInt(this.multiplyLineFactor),this.KeyUp=v.Key.Up,this.KeyDown=v.Key.Down,this.KeyLeft=v.Key.Left,this.KeyRight=v.Key.Right,a("html").hasClass("rtl")&&(this.KeyLeft=v.Key.Right,this.KeyRight=v.Key.Left)),this.sActionSelector="",this.sSelectabelSelector="",this.sCheckboxSelector="";var m=this;this.listChecked=c.computed({read:function(){var a=_.filter(this.list(),function(a){var b=a.checked(),c=a.selected();return b||m.bCheckOnSelect&&c});return a},write:function(a){a=!!a,_.each(this.list(),function(b){b.checked(a)}),this.list.valueHasMutated()},owner:this}),this.checkAll=c.computed({read:function(){return 0<this.listChecked().length},write:function(a){this.listChecked(!!a)},owner:this}),this.selectorHook=c.observable(null),this.selectorHook.subscribe(function(){var a=this.selectorHook();a&&a.selected(!1)},this,"beforeChange"),this.selectorHook.subscribe(function(a){a&&a.selected(!0)},this),this.itemSelected=c.computed({read:this.selectorHook,write:function(a){this.selectorHook(a),a&&(this.oLast=a)},owner:this}),this.list.subscribe(function(a){if(_.isArray(a)){var b=this.itemSelected();b&&(_.find(a,function(a){return b===a})||this.itemSelected(null))}else this.itemSelected(null)},this),this.listCheckedOrSelected=c.computed({read:function(){var a=this.itemSelected(),b=this.listChecked();return 0<b.length?b:a?[a]:[]},write:function(a){a?this.listChecked(!0):(this.itemSelected(null),this.listChecked(!1))},owner:this}),this.listCheckedAndSelected=c.computed({read:function(){var a=[],b=this.itemSelected(),c=this.listChecked();return c&&(a=c.slice(0)),b&&-1===_.indexOf(c,b)&&a.push(b),a},write:function(a){a?this.listChecked(!0):(this.itemSelected(null),this.listChecked(!1))},owner:this}),this.isIncompleteChecked=c.computed(function(){var a=this.list().length,b=this.listChecked().length;return a>0&&b>0&&a>b},this),this.onKeydownBinded=_.bind(this.onKeydown,this)}function g(){}function h(){Data.init()}function i(){this.alertDesc=c.observable(""),this.closeCallback=null,this.title=c.observable(""),this.okButtonText=c.observable(w.i18n("MAIN/BUTTON_OK"))}function j(){this.fConfirmCallback=null,this.confirmDesc=c.observable(""),this.title=c.observable(""),this.okButtonText=c.observable(w.i18n("MAIN/BUTTON_OK")),this.cancelButtonText=c.observable(w.i18n("MAIN/BUTTON_CANCEL"))}function k(){this.fCallback=null,this.folderName=c.observable(""),this.folderNameFocus=c.observable(!1)}function l(){this.fCallback=null,this.item=c.observable(null),this.name=c.observable(""),this.nameFocus=c.observable(!1)}function m(){this.item=null,this.pub=c.observable(""),this.pubFocus=c.observable(!1)}function n(){this.IdUser=1,this.MailsPerPage=20,this.ContactsPerPage=20,this.iInterval=-1,this.AutoCheckMailInterval=0,this.DefaultEditor=1,this.Layout=v.MailboxLayout.Side,this.DefaultTheme="Default",this.DefaultLanguage="English",this.DefaultDateFormat="MM/DD/YYYY",this.defaultTimeFormat=c.observable(0),this.ThreadsEnabled=!0,this.useThreads=c.observable(!0),this.saveRepliedToCurrFolder=c.observable(!0),this.AllowCompose=!0,this.AllowReply=!0,this.AllowForward=!0,this.SaveMail=v.SaveMail.Checked,this.AllowFetcher=!1,this.OutlookSyncEnable=!0,this.MobileSyncEnable=!0,this.ShowPersonalContacts=!0,this.ShowGlobalContacts=!1,this.IsFilesSupported=!1,this.IsHelpdeskSupported=!1,this.IsHelpdeskAgent=!1,this.HelpdeskIframeUrl="",this.ShowContacts=this.ShowPersonalContacts||this.ShowGlobalContacts,this.LastLogin=0,this.IsDemo=!1,this.AllowVoice=!1,this.VoiceRealm="",this.VoiceWebsocketProxyUrl="",this.VoiceOutboundProxyUrl="",this.VoiceCallerID="",this.VoiceImpi="",this.VoiceImpu="",this.VoicePassword="",this.VoiceProvider="",this.AllowCalendar=!0,this.CalendarSharing=!1,this.CalendarAppointments=!1,this.CalendarShowWeekEnds=!1,this.CalendarShowWorkDay=!1,this.CalendarWorkDayStarts=0,this.CalendarWorkDayEnds=0,this.CalendarWeekStartsOn=0,this.CalendarDefaultTab=v.CalendarDefaultTab.Month,this.needToReloadCalendar=c.observable(!1),this.mobileSync=c.observable(null),this.MobileSyncDemoPass="demo",this.outlookSync=c.observable(null),this.OutlookSyncDemoPass="demo",this.AllowHelpdeskNotifications=!1}function o(){this.oMoment=null}function p(){this.isIosDevice=E,this.fileName=c.observable(""),this.tempName=c.observable(""),this.displayName=c.observable(""),this.extension=c.observable(""),this.fileName.subscribe(function(){var a=this.fileName(),b=a.lastIndexOf(".");this.displayName(a.substr(0,b)),this.extension(a.substr(b+1))},this),this.size=c.observable(0),this.friendlySize=c.computed(function(){return w.friendlySize(this.size())},this),this.downloadTitle=c.computed(function(){return w.i18n("MESSAGE/ATTACHMENT_CLICK_TO_DOWNLOAD",{FILENAME:this.fileName(),SIZE:this.friendlySize()})},this),this.accountId=c.observable(A.Accounts.defaultId()),this.hash=c.observable(""),this.thumb=c.observable(!1),this.downloadLink=c.computed(function(){return w.getDownloadLinkByHash(this.accountId(),this.hash())},this),this.viewLink=c.computed(function(){return w.getViewLinkByHash(this.accountId(),this.hash())},this),this.thumbnailSrc=c.observable(""),this.thumbnailLoaded=c.observable(!1),this.thumbnailSessionUid=c.observable(""),this.thumbnailLink=c.computed(function(){return this.thumb()?w.getViewThumbnailLinkByHash(this.accountId(),this.hash()):""},this),this.type=c.observable(""),this.uploadUid=c.observable(""),this.uploaded=c.observable(!1),this.uploadError=c.observable(!1),this.isViewMimeType=c.computed(function(){return-1!==a.inArray(this.type(),H)},this),this.isMessageType=c.observable(!1),this.visibleViewLink=c.computed(function(){return this.isVisibleViewLink()},this),this.subFiles=c.observableArray([]),this.allowExpandSubFiles=c.observable(!1),this.subFilesLoaded=c.observable(!1),this.subFilesCollapsed=c.observable(!1),this.subFilesStartedLoading=c.observable(!1),this.visibleExpandLink=c.computed(function(){return this.allowExpandSubFiles()&&!this.subFilesCollapsed()&&!this.subFilesStartedLoading()},this),this.visibleExpandingText=c.computed(function(){return this.allowExpandSubFiles()&&!this.subFilesCollapsed()&&this.subFilesStartedLoading()},this),this.visibleSpinner=c.observable(!1),this.statusText=c.observable(""),this.progressPercent=c.observable(0),this.visibleProgress=c.observable(!1),this.uploadStarted=c.observable(!1),this.uploadStarted.subscribe(function(){this.uploadStarted()?(this.uploaded(!1),this.visibleProgress(!0),this.progressPercent(20)):(this.progressPercent(100),this.visibleProgress(!1),this.uploaded(!0))},this)}function q(){this.displayName=c.observable(""),this.nameForEdit=c.observable(""),this.storageType=c.observable(v.FileStorageType.Private),this.lastModified=c.observable(""),this.path=c.observable(""),this.publicHash=c.observable(""),this.selected=c.observable(!1),this.checked=c.observable(!1),this.isFolder=c.observable(!1),this.edited=c.observable(!1),this.deleted=c.observable(!1),this.recivedAnim=c.observable(!1).extend({autoResetToFalse:500}),this.shared=c.observable(!1),this.owner=c.observable(""),this.ownerHeaderText=c.computed(function(){return w.i18n("FILESTORAGE/OWNER_HEADER_EMAIL",{OWNER:this.owner()})},this),this.lastModifiedHeaderText=c.computed(function(){return w.i18n("FILESTORAGE/OWNER_HEADER_LAST_MODIFIED_DATE_TEXT",{LASTMODIFIED:this.lastModified()})},this),p.call(this),this.fileName.subscribe(function(a){this.nameForEdit(a),this.displayName(a)},this),this.displayName.subscribe(function(a){this.displayName(w.getFileNameWithoutExtension(a))},this),this.type=this.storageType,this.uploaded=c.observable(!0),this.downloadLink=c.computed(function(){return w.getFilestorageDownloadLinkByHash(A.Accounts.currentId(),this.hash(),this.publicHash())},this),this.viewLink=c.computed(function(){return w.getFilestorageViewLinkByHash(A.Accounts.currentId(),this.hash(),this.publicHash())},this),this.isViewable=c.computed(function(){var a=!1,b=["JPEG","JPG","PNG","GIF","TXT","PDF"];return _.indexOf(b,this.extension().toUpperCase())>=0&&(a=!0),a},this),this.visibleViewLink=this.isViewable,this.thumbnailLink=c.computed(function(){return this.thumb()?w.getFilestorageViewThumbnailLinkByHash(this.accountId(),this.hash(),this.publicHash()):""},this),this.edited.subscribe(function(a){a===!1&&this.nameForEdit(this.fileName())},this)}function r(){this.isPublic=B,this.publicHash=B?A.FileStoragePubHash:"",this.groups=c.observableArray(),this.folders=c.observableArray(),this.files=c.observableArray(),this.uploadingFiles=c.observableArray(),this.selected=c.observable(!1),this.storageType=c.observable(v.FileStorageType.Private),this.rootPath=c.computed(function(){var a=w.i18n("FILESTORAGE/TAB_PRIVATE_FILES");return this.isPublic?a=A.FileStoragePubParams.Name:this.storageType()===v.FileStorageType.Corporate?a=w.i18n("FILESTORAGE/TAB_CORPORATE_FILES"):this.storageType()===v.FileStorageType.Shared&&(a=w.i18n("FILESTORAGE/TAB_SHARED_FILES")),a},this),this.iPathIndex=c.observable(-1),this.aPath=c.observableArray(),this.dropPath=c.observable(""),this.path=c.computed(function(){var a=_.map(this.aPath(),function(a){return a.fileName()});return a.join("/")},this),this.path.subscribe(function(a){this.dropPath(a)},this),this.collection=c.computed(function(){var a=_.union(this.files(),this.getUploadingFiles());return a.sort(function(a,b){return a.fileName()===b.fileName()?0:a.fileName()<b.fileName()?-1:1}),_.union(this.folders(),a)},this),this.columnCount=c.observable(1),this.selector=new f(this.collection,null,_.bind(this.onItemDelete,this),_.bind(this.onItemDblClick,this),_.bind(this.onEnter,this),this.columnCount,!0,!0,!0),this.storageType.subscribe(function(){this.selector.listCheckedAndSelected(!1)},this),this.searchPattern=c.observable(""),this.isSearchFocused=c.observable(!1),this.renameCommand=w.createCommand(this,this.executeRename,function(){return 1===this.selector.listCheckedAndSelected().length}),this.deleteCommand=w.createCommand(this,this.executeDelete,function(){var a=this.selector.listCheckedAndSelected();return 0<a.length}),this.downloadCommand=w.createCommand(this,this.executeDownload,function(){var a=this.selector.listCheckedAndSelected();return 1===a.length&&!a[0].isFolder()}),this.shareCommand=w.createCommand(this,this.executeShare,function(){var a=this.selector.listCheckedAndSelected();return 1===a.length}),this.sendCommand=w.createCommand(this,this.executeSend,function(){var a=this.selector.listCheckedAndSelected(),b=_.filter(a,function(a){return!a.isFolder()},this);return b.length>0}),this.uploaderButton=c.observable(null),this.uploaderArea=c.observable(null),this.bDragActive=c.observable(!1),this.bDragActiveComp=c.computed(function(){var a=this.bDragActive();return a&&""===this.searchPattern()},this),this.uploadError=c.observable(!1),this.quota=c.observable(0),this.used=c.observable(0),this.quotaDesc=c.observable(""),this.quotaProc=c.observable(-1),c.computed(function(){if(!A.App.ShowQuotaBar)return!0;var a=this.quota(),b=this.used(),c=a>0?Math.ceil(b/a*100):-1;return c=c>100?100:c,this.quotaProc(c),this.quotaDesc(c>-1?w.i18n("MAILBOX/QUOTA_TOOLTIP",{PROC:c,QUOTA:w.friendlySize(a)}):""),!0},this),this.dragover=c.observable(!1),this.loading=c.observable(!1),this.fileListInfoText=c.computed(function(){var a="";return this.loading()||0===this.collection().length&&(a=""!==this.searchPattern()?w.i18n("FILESTORAGE/INFO_NO_ITEMS_FOUND"):""===this.path()?w.i18n("FILESTORAGE/INFO_FILESTORAGE_IS_EMTY"):w.i18n("FILESTORAGE/INFO_FOLDER_IS_EMPY")),a},this),this.dragAndDropHelperBinded=_.bind(this.dragAndDropHelper,this),this.lastPath=c.observable(null)}function s(){this.loadingMessage=c.observable(""),this.loadingVisible=c.observable(!1),this.reportMessage=c.observable(""),this.reportVisible=c.observable(!1),this.iReportTimeout=0/0,this.errorMessage=c.observable(""),this.errorNotHide=c.observable(!1),this.errorVisible=c.observable(!1),this.iErrorTimeout=-1,this.isHtmlError=c.observable(!1),this.gray=c.observable(!1)}function t(){this.oScreens={},this.currentScreen=c.observable(""),this.popupVisibility=c.observable(!1),this.informationScreen=c.observable(null),this.popups=[]}function u(){this.browser=new d,this.Ajax=new e,this.Screens=new t,this.Api=new g,this.Storage=new h,this.init()}var v={},w={},x=b.pSevenI18N||{},y={},z={},A=b.pSevenAppData||{},B=!1,C=!1,D=a("html"),E=-1<navigator.userAgent.indexOf("iPhone")||-1<navigator.userAgent.indexOf("iPod")||-1<navigator.userAgent.indexOf("iPad"),F=-1<navigator.userAgent.toLowerCase().indexOf("android"),G=E||F,H=["image/jpeg","image/png","image/gif","text/html","text/plain","text/css","text/rfc822-headers","message/delivery-status","application/x-httpd-php","application/javascript"];if(b.Modernizr&&navigator&&b.Modernizr.addTest("pdf",function(){for(var a=navigator.mimeTypes,b=0,c=a.length;c>b;b++)if("application/pdf"===a[b].type)return!0;return!1}),Date.now||(Date.now=function(){return(new Date).getTime()}),B=!0,d.prototype.getIeVersion=function(){var a=navigator.userAgent.toLowerCase(),b=w.pInt(a.slice(a.indexOf("msie")+4,a.indexOf(";",a.indexOf("msie")+4)));return b},e.prototype.hasOpenedRequests=function(){return this.aRequests=_.filter(this.aRequests,function(a){var b=a&&4===a.Xhr.readyState,c=!a||0===a.Xhr.readyState&&"abort"===a.Xhr.statusText;return a&&!b&&!c}),this.aRequests.length>0},e.prototype.isSearchMessages=function(){var a=!1;return _.each(this.aRequests,function(b){b&&b.Parameters&&"MessageList"===b.Parameters.Action&&""!==b.Parameters.Search&&(a=!0)},this),a},e.prototype.isAllowedActionWithoutAuth=function(a){var b=["Login","LoginLanguageUpdate","Logout","AccountCreate","SetMobile"];return-1!==_.indexOf(b,a)},e.prototype.isAllowedExtAction=function(a){return"SocialRegister"===a||"HelpdeskRegister"===a||"HelpdeskForgot"===a||"HelpdeskLogin"===a||"Logout"===a},e.prototype.doSend=function(b,c,d,e){var f=_.bind(e||null,this,b,c,d),g=_.bind(this.fail,this,b,c,d),h=_.bind(this.always,this,b),i=null;z.runPluginHook&&z.runPluginHook("ajax-default-request",[b.Action,b]),A.Token&&(b.Token=A.Token),this.abortRequests(b),w.log("Ajax request send",b.Action,b),i=a.ajax({url:this.sUrl,type:"POST",async:!0,dataType:"json",data:b,success:f,error:g,complete:h}),this.aRequests.push({Parameters:b,Xhr:i})},e.prototype.send=function(a,b,c){var d=void 0===a.AccountID,e=d||A.Accounts.hasAccountWithId(a.AccountID);a&&(A.Auth&&e||this.isAllowedActionWithoutAuth(a.Action))&&(d&&"Login"!==a.Action&&(a.AccountID=A.Accounts.currentId()),this.doSend(a,b,c,this.done))},e.prototype.sendExt=function(a,b,c){var d=["SocialRegister","HelpdeskRegister","HelpdeskForgot","HelpdeskLogin","HelpdeskForgotChangePassword","Logout","CalendarList","EventList","FilesPub"],e=-1!==_.indexOf(d,a.Action);a&&(A.Auth||e)&&(A.TenantHash&&(a.TenantHash=A.TenantHash),this.doSend(a,b,c,this.doneExt))},e.prototype.abortRequests=function(a){switch(a.Action){case"MessageMove":case"MessageDelete":this.abortRequestByActionName("MessageList",{Folder:a.Folder}),this.abortRequestByActionName("Message");break;case"MessageList":case"MessageSetSeen":this.abortRequestByActionName("MessageList",{Folder:a.Folder});break;case"FolderClear":this.abortRequestByActionName("MessageList",{Folder:a.Folder}),this.abortRequestByActionName("FolderCounts");break;case"ContactList":case"GlobalContactList":this.abortRequestByActionName("ContactList"),this.abortRequestByActionName("GlobalContactList");break;case"Contact":case"GlobalContact":this.abortRequestByActionName("Contact"),this.abortRequestByActionName("GlobalContact");break;case"EventUpdate":this.abortRequestByActionName("EventUpdate",{calendarId:a.calendarId,uid:a.uid})}},e.prototype.abortRequestByActionName=function(a,b){var c;_.each(this.aRequests,function(d,e){if(c=!1,d&&d.Parameters.Action===a)switch(a){case"MessageList":b.Folder===d.Parameters.Folder&&(c=!0);break;case"EventUpdate":b.calendarId===d.Parameters.calendarId&&b.uid===d.Parameters.uid&&(c=!0);break;default:c=!0}c&&(d.Xhr.abort(),this.aRequests[e]=void 0)},this),this.aRequests=_.compact(this.aRequests)},e.prototype.abortAllRequests=function(){_.each(this.aRequests,function(a){a&&a.Xhr.abort()},this),this.aRequests=[]},e.prototype.done=function(a,b,c,d,e){var f=this.isAllowedActionWithoutAuth(a.Action),g=A.Accounts.hasAccountWithId(a.AccountID),h=a.AccountID===A.Accounts.defaultId();if(w.log("Ajax request done",a.Action,e,w.getAjaxDataForLog(a.Action,d),a),f||g){if(d&&!d.Result)switch(d.ErrorCode){case v.Errors.InvalidToken:f||y.tokenProblem();break;case v.Errors.AuthError:h&&!f&&(this.abortAllRequests(),y.authProblem())}this.executeResponseHandler(b,c,d,a)}w.checkConnection(a.Action,d)},e.prototype.doneExt=function(a,b,c,d){this.executeResponseHandler(b,c,d,a)},e.prototype.fail=function(a,b,c,d,e,f){var g={Result:!1,ErrorCode:0};switch(w.log("Ajax request fail",a.Action,e,a),e){case"abort":g={Result:!1,ErrorCode:v.Errors.NotDisplayedError};break;default:case"error":case"parseerror":g=""===f?{Result:!1,ErrorCode:v.Errors.NotDisplayedError}:{Result:!1,ErrorCode:v.Errors.DataTransferFailed}}this.executeResponseHandler(b,c,g,a),w.checkConnection(a.Action,g)},e.prototype.executeResponseHandler=function(a,b,c,d){c||(c={Result:!1,ErrorCode:0}),z.runPluginHook&&z.runPluginHook("ajax-default-response",[d.Action,c]),"function"==typeof a&&a.apply(b,[c,d])},e.prototype.always=function(a){_.each(this.aRequests,function(b,c){b&&_.isEqual(b.Parameters,a)&&(this.aRequests[c]=void 0)},this),this.aRequests=_.compact(this.aRequests)},v.Screens={Login:"login",Information:"information",Header:"header",Mailbox:"mailbox",BottomMailbox:"bottommailbox",SingleMessageView:"single-message-view",Compose:"compose",SingleCompose:"single-compose",Settings:"settings",Contacts:"contacts",Calendar:"calendar",FileStorage:"files",Helpdesk:"helpdesk",SingleHelpdesk:"single-helpdesk"},v.MailboxLayout={Side:0,Bottom:1},v.CalendarDefaultTab={Day:1,Week:2,Month:3},v.TimeFormat={F24:0,F12:1},v.Errors={InvalidToken:101,AuthError:102,DataBaseError:104,LicenseProblem:105,DemoLimitations:106,Captcha:107,AccessDenied:108,CanNotGetMessage:202,ImapQuota:205,NotSavedInSentItems:304,CanNotChangePassword:502,AccountOldPasswordNotCorrect:503,FetcherIncServerNotAvailable:702,FetcherLoginNotCorrect:703,HelpdeskThrowInWebmail:805,HelpdeskUserNotExists:807,HelpdeskUserNotActivated:808,MailServerError:901,DataTransferFailed:1100,NotDisplayedError:1155},v.FolderTypes={Inbox:1,Sent:2,Drafts:3,Spam:4,Trash:5,Virus:6,Starred:7,System:9,User:10},v.FolderFilter={Flagged:"flagged"},v.LoginFormType={Email:0,Login:3,Both:4},v.LoginSignMeType={DefaultOff:0,DefaultOn:1,Unuse:2},v.ReplyType={Reply:"reply",ReplyAll:"reply-all",Resend:"resend",Forward:"forward"},v.Importance={Low:5,Normal:3,High:1},v.Sensivity={Nothing:0,Confidential:1,Private:2,Personal:3},v.ContactEmailType={Personal:"Personal",Business:"Business",Other:"Other"},v.ContactPhoneType={Mobile:"Mobile",Personal:"Personal",Business:"Business"},v.ContactAddressType={Personal:"Personal",Business:"Business"},v.ContactSortType={Email:"Email",Name:"Name",Frequency:"Frequency"},v.SaveMail={Hidden:0,Checked:1,Unchecked:2},v.SettingsTab={Common:"common",EmailAccounts:"accounts",Calendar:"calendar",MobileSync:"mobile_sync",OutLookSync:"outlook_sync",Helpdesk:"helpdesk"},v.AccountSettingsTab={Properties:"properties",Signature:"signature",Filters:"filters",Autoresponder:"autoresponder",Forward:"forward",Folders:"folders",FetcherInc:"fetcher-inc",FetcherOut:"fetcher-out",FetcherSig:"fetcher-sig",IdentityProperties:"identity-properties",IdentitySignature:"identity-signature"},v.ContactsGroupListType={Personal:0,SubGroup:1,Global:2,SharedToAll:3},v.IcalType={Request:"REQUEST",Reply:"REPLY",Cancel:"CANCEL",Save:"SAVE"},v.IcalConfig={Accepted:"ACCEPTED",Declined:"DECLINED",Tentative:"TENTATIVE",NeedsAction:"NEEDS-ACTION"},v.IcalConfigInt={Accepted:1,Declined:2,Tentative:3,NeedsAction:0},v.Key={Tab:9,Enter:13,Shift:16,Ctrl:17,Space:32,PageUp:33,PageDown:34,End:35,Home:36,Up:38,Down:40,Left:37,Right:39,Del:46,Six:54,a:65,c:67,f:70,n:78,p:80,q:81,r:82,s:83,v:86,F5:116,Comma:188,Dot:190,Dash:192,Apostrophe:222},v.MouseKey={Left:0,Middle:1,Right:2},v.FileStorageType={Private:0,Corporate:1,Shared:2},v.HelpdeskThreadStates={None:0,Pending:1,Waiting:2,Answered:3,Resolved:4,Deferred:5},v.HelpdeskPostType={Normal:0,Internal:1,System:2},v.HelpdeskFilters={All:0,Pending:1,Resolved:2,InWork:3,Open:4,Archived:9},v.CalendarAccess={Full:0,Write:1,Read:2},v.CalendarEditRecurrenceEvent={None:0,OnlyThisInstance:1,AllEvents:2},v.CalendarRepeatPeriod={None:0,Daily:1,Weekly:2,Monthly:3,Yearly:4},v.DesktopNotifications={Allowed:0,NotAllowed:1,Denied:2,NotSupported:9},v.PhoneAction={Settings:"settings",Incoming:"incoming",Outgoing:"outgoing"},v.HtmlEditorImageSizes={Small:"small",Medium:"medium",Large:"large",Original:"original"},v.MobilePanel={Groups:1,Items:2,View:3},c.bindingHandlers.command={init:function(b,d,e,f){var g=a(b),h=d();if(!h||!h.enabled||!h.canExecute)throw new Error("You are not using command function");g.addClass("command"),c.bindingHandlers[g.is("form")?"submit":"click"].init.apply(f,arguments)},update:function(b,c){var d=!0,e=a(b),f=c();d=f.enabled(),e.toggleClass("command-not-enabled",!d),d&&(d=f.canExecute(),e.toggleClass("unavailable",!d)),e.toggleClass("command-disabled disable disabled",!d),e.toggleClass("command-disabled",!d)}},c.bindingHandlers.onEnter={init:function(d,e,f,g){c.bindingHandlers.event.init(d,function(){return{keyup:function(c,f){f&&13===b.parseInt(f.keyCode,10)&&(a(d).trigger("change"),e().call(this,c))}}},f,g)}},c.bindingHandlers.onCtrlEnter={init:C?null:function(d,e,f,g){c.bindingHandlers.event.init(d,function(){return{keydown:function(c,f){return f&&13===b.parseInt(f.keyCode,10)&&f.ctrlKey?(a(d).trigger("change"),e().call(this,c),!1):!0}}},f,g)}},c.bindingHandlers.onEsc={init:C?null:function(d,e,f,g){c.bindingHandlers.event.init(d,function(){return{keyup:function(c,f){f&&27===b.parseInt(f.keyCode,10)&&(a(d).trigger("change"),e().call(this,c))}}},f,g)}},c.bindingHandlers.onFocusSelect={init:function(a,b,d,e){c.bindingHandlers.event.init(a,function(){return{focus:function(){a.select()},mouseup:function(){return!1}}},d,e)}},c.bindingHandlers.onFocusMoveCaretToEnd={init:function(a,b,d,e){c.bindingHandlers.event.init(a,function(){return{focus:function(){w.moveCaretToEnd(a)}}},d,e)}},c.bindingHandlers.onEnterChange={init:function(d,e,f,g){c.bindingHandlers.event.init(d,function(){return{keyup:function(c,e){e&&13===b.parseInt(e.keyCode,10)&&a(d).trigger("change")}}},f,g)}},c.bindingHandlers.jhasfocus={init:function(b,c){a(b).on("focus",function(){c()(!0)}).on("blur",function(){c()(!1)})},update:function(b,d){c.utils.unwrapObservable(d())?a(b).is(":focus")||a(b).focus():a(b).is(":focus")&&a(b).blur()}},c.bindingHandlers.fadeIn={update:function(b,d){c.utils.unwrapObservable(d())&&a(b).hide().fadeIn("fast")}},c.bindingHandlers.fadeOut={update:function(b,d){c.utils.unwrapObservable(d())&&a(b).fadeOut()}},c.bindingHandlers.csstext={init:function(b,d){b&&b.styleSheet&&!w.isUnd(b.styleSheet.cssText)?b.styleSheet.cssText=c.utils.unwrapObservable(d()):a(b).text(c.utils.unwrapObservable(d()))},update:function(b,d){b&&b.styleSheet&&!w.isUnd(b.styleSheet.cssText)?b.styleSheet.cssText=c.utils.unwrapObservable(d()):a(b).text(c.utils.unwrapObservable(d()))}},c.bindingHandlers.i18n={init:function(b,c){var d=a(b).data("i18n"),e=d?w.i18n(d):d;if(""!==e)switch(c()){case"value":a(b).val(e);break;case"text":a(b).text(e);break;case"html":a(b).html(e);break;case"title":a(b).attr("title",e);break;case"placeholder":a(b).attr({placeholder:e})}}},c.bindingHandlers.link={init:function(b,d){a(b).attr("href",c.utils.unwrapObservable(d()))}},c.bindingHandlers.title={init:function(b,d){a(b).attr("title",c.utils.unwrapObservable(d()))},update:function(b,d){a(b).attr("title",c.utils.unwrapObservable(d()))}},c.bindingHandlers.initDom={init:function(b,c){if(c())if(_.isArray(c()))for(var d=c(),e=d.length-1;e>=0;e--)d[e](a(b));else c()(a(b))}},c.bindingHandlers.customScrollbar={init:C?null:function(b,c){if(!G){var d=a(b),e=c();e=e,d.addClass("scroll-wrap").customscroll(e),w.isUnd(e.reset)||(b._customscroll_reset=_.throttle(function(){d.data("customscroll").reset()},100)),!w.isUnd(e.scrollToTopTrigger)&&w.isFunc(e.scrollToTopTrigger.subscribe)&&e.scrollToTopTrigger.subscribe(function(){d.data("customscroll")&&d.data("customscroll").scrollToTop()}),!w.isUnd(e.scrollToBottomTrigger)&&w.isFunc(e.scrollToBottomTrigger.subscribe)&&e.scrollToBottomTrigger.subscribe(function(){d.data("customscroll")&&d.data("customscroll").scrollToBottom()}),!w.isUnd(e.scrollTo)&&w.isFunc(e.scrollTo.subscribe)&&e.scrollTo.subscribe(function(){d.data("customscroll")&&d.data("customscroll").scrollTo(e.scrollTo())})}},update:C?null:function(b,c){G||(b._customscroll_reset&&b._customscroll_reset(),w.isUnd(c().top)||a(b).data("customscroll").vertical.set(c().top))}},c.bindingHandlers.customOptions={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b,d,e,f){for(var g=0,h=0,i=c.utils.arrayMap(c.utils.arrayFilter(a.childNodes,function(a){return a.tagName&&"OPTION"===a.tagName&&a.selected}),function(a){return c.selectExtensions.readValue(a)||a.innerText||a.textContent}),j=a.scrollTop,k=c.utils.unwrapObservable(b());a.length>0;)c.cleanNode(a.options[0]),a.remove(0);if(k){"number"!=typeof k.length&&(k=[k]);var l=d().optionsBind;for(g=0,h=k.length;h>g;g++){var m=document.createElement("OPTION"),n=c.utils.unwrapObservable(k[g]);c.selectExtensions.writeValue(m,n),m.appendChild(document.createTextNode(n)),a.appendChild(m),l&&(m.setAttribute("data-bind",l),c.applyBindings(f.createChildContext(n),m))}var o=a.getElementsByTagName("OPTION"),p=0,q=navigator.userAgent.indexOf("MSIE 6")>=0;for(g=0,h=o.length;h>g;g++)c.utils.arrayIndexOf(i,c.selectExtensions.readValue(o[g]))>=0&&(q?o[g].setAttribute("selected",!0):o[g].selected=!0,p++);a.scrollTop=j,p<i.length&&c.utils.triggerEvent(a,"change")}}},c.bindingHandlers.splitter={init:C?null:function(b,c){var d=a(b),e=c();setTimeout(function(){d.splitter(_.defaults(e,{}))},1)}},c.bindingHandlers.dropdown={init:function(b,c,d,e){var f=a(b),g=_.defaults(c(),{disabled:"disabled",expand:"expand",control:!0,container:".dropdown_content",passClick:!0,trueValue:!0}),h=g.control?f.find(".control"):f,i=a(document),j=function(){w.isUnd(g.callback)||g.callback.call(e,f.hasClass(g.expand)?g.trueValue:!1,f)},k=function(a){a.stopPropagation()};g.passClick||(f.find(g.container).click(k),h.click(k)),f.removeClass(g.expand),g.close&&g.close.subscribe&&g.close.subscribe(function(a){a||(i.unbind("click.dropdown"),f.removeClass(g.expand)),j()}),h.click(function(){f.hasClass(g.disabled)||(f.toggleClass(g.expand),_.defer(function(){j()}),f.hasClass(g.expand)&&(g.close&&g.close.subscribe&&g.close(!0),_.defer(function(){i.on("click.dropdown",function(a){(g.passClick||a.button!==v.MouseKey.Right)&&(i.unbind("click.dropdown"),g.close&&g.close.subscribe&&g.close(!1),f.removeClass(g.expand),j())})})))})}},c.bindingHandlers.customSelect={init:function(b,c,d,e){var f=a(b),g=_.defaults(c(),{disabled:"disabled",selected:"selected",expand:"expand",control:!0,input:!1}),h=[],i=g.control?f.find(".control"):f,j=f.find(".dropdown_content"),k=f.find(".link"),l=function(b){_.each(h,function(a){a.removeClass(g.selected)});var c=_.find(g.options,function(a){return a[g.optionsValue]===b});return w.isUnd(c)?c=g.options[0]:(h[_.indexOf(g.options,c)].addClass(g.selected),k.text(a.trim(c[g.optionsText]))),c[g.optionsValue]},m=function(b){j.empty(),h=[],_.each(b?b:g.options,function(b){var c=a('<span class="item"></span>').text(b[g.optionsText]).data("value",b[g.optionsValue]),d=b.isDisabled;d?c.data("isDisabled",d).addClass("disabled"):c.data("isDisabled",d).removeClass("disabled"),h.push(c),j.append(c)},this)};m(),j.on("click",".item",function(){var b=a(this);b.data("isDisabled")||g.value(b.data("value"))}),!g.input&&g.value&&g.value.subscribe&&(g.value.subscribe(function(){var a=l(g.value());g.value()!==a&&g.value(a)},e),g.value.valueHasMutated()),g.input&&g.value&&g.value.subscribe&&(g.value.subscribe(function(){l(g.value())},e),g.value.valueHasMutated()),g.alarmOptions&&g.alarmOptions.subscribe(function(){m()},e),g.timeOptions&&g.timeOptions.subscribe(function(a){m(a)},e),f.removeClass(g.expand),i.click(function(){if(!f.hasClass(g.disabled)&&(f.toggleClass(g.expand),f.hasClass(g.expand))){var b=f.find(".dropdown_content"),c=b.find(".selected");c.position()&&(b.scrollTop(0),b.scrollTop(c.position().top-100)),_.defer(function(){a(document).one("click",function(){f.removeClass(g.expand)})})}})}},c.bindingHandlers.moveToFolderFilter={init:function(b,c){var d=a(b),e=_.defaults(c(),{disabled:"disabled",selected:"selected",expand:"expand",control:!0,container:".content"}),f=e.control?d.find(".control"):d,g=d.find(e.container),h=d.find(".link");d.removeClass(e.expand),e.options.subscribe(function(a){var b=e.value(),c=_.find(a,function(a){return a.id===b});c||e.value("")}),e.value&&e.value.subscribe&&(e.value.subscribe(function(b){var c=_.isArray(e.options)?e.options:e.options(),d=_.find(c,function(a){return a[e.optionsValue]===b});d||(d=_.find(c,function(a){return""===a[e.optionsValue]}),d&&""!==b&&e.value("")),d&&h.text(a.trim(d[e.optionsText]))}),e.value.valueHasMutated()),g.on("click",".item",function(){var b=a(this).data("value");e.value(b)}),f.click(function(){d.hasClass(e.disabled)||(d.toggleClass(e.expand),d.hasClass(e.expand)&&_.defer(function(){a(document).one("click",function(){d.removeClass(e.expand)})}))})},update:function(b,c){var d=_.defaults(c(),{disabled:"disabled",selected:"selected",expand:"expand",control:!0,container:".content"}),e=a(b).find(d.container),f=_.isArray(d.options)?d.options:d.options(),g=d.value?d.value():"";e.empty(),_.each(f,function(b){var c=a('<span class="item"></span>').text(b[d.optionsText]).data("value",b[d.optionsValue]);g===b[d.optionsValue]&&c.addClass("selected"),e.append(c)})}},c.bindingHandlers.contactcard={init:C?null:function(b,c){var d=a(b),e=!1,f=_.defaults(c(),{disabled:"disabled",expand:"expand",control:!0}),g=f.control?d.find(".control"):d;void 0!==f.trigger&&void 0!==f.trigger.subscribe&&(d.removeClass(f.expand),g.bind({mouseover:function(){!d.hasClass(f.disabled)&&f.trigger()&&(e=!0,_.delay(function(){e&&(void 0!==f.controlWidth&&void 0!==f.controlWidth.subscribe&&f.controlWidth(g.width()),d.addClass(f.expand))},200))},mouseout:function(){f.trigger()&&(e=!1,_.delay(function(){e||d.removeClass(f.expand)},200))}}))}},c.bindingHandlers.checkmail={update:function(b,c){var d=b.oOptions||null,e=b.jqElement||null,f=b.oIconIE||null,g=c(),h=g.state;void 0!==g.state&&(e||(b.jqElement=e=a(b)),d||(b.oOptions=d=_.defaults(g,{activeClass:"process",duration:800})),w.deferredUpdate(e,h,d.duration,function(a,c){if(y.browser.ie9AndBelow)if(f||(b.oIconIE=f=e.find(".icon")),!f.__intervalIE&&c){var g=0,h="";
f.__intervalIE=setInterval(function(){h="0px -"+20*g+"px",g=7>g?g+1:0,f.css({"background-position":h})},1e3/12)}else f.css({"background-position":"0px 0px"}),clearInterval(f.__intervalIE),f.__intervalIE=null;else a.toggleClass(d.activeClass,c)}))}},c.bindingHandlers.heightAdjust={update:function(b,c){var d=b.jqElement||null,e=0,f=c().location,g=c().delay||400;d||(b.jqElement=d=a(b)),_.delay(function(){_.each(c().elements,function(a){var b=a();b&&(e+=b.is(":visible")?b.outerHeight():0)}),"top"===f||void 0===f?d.css({"padding-top":e,"margin-top":-e}):"bottom"===f&&d.css({"padding-bottom":e,"margin-bottom":-e})},g)}},c.bindingHandlers.triggerInview={update:function(b,c){c().trigger().length<=0||_.defer(function(){var d=a(b),e=d.height(),f=c(),g=null,h=null;f=f,g=d.find(f.selector),g.each(function(){this.$el=a(this),this.inviewHeight=this.$el.height(),this.inview=!1}),h=_.debounce(function(){g.each(function(){var a=this.inview||!1,b=this.$el.position().top+parseInt(this.$el.css("margin-top"),10);b>0&&e>b?a||(this.inview=!0,this.$el.trigger("inview")):this.inview=!1})},2e3),d.scroll(h),h()})}},c.bindingHandlers.watchWidth={init:function(c,d){a(b).bind("resize",function(){d()(a(c).outerWidth())})}},c.bindingHandlers.columnCalc={init:function(c,d){var e=a(c),f=d().prop,g=null,h=0;g=e.find(d().itemSelector),void 0!==g[0]&&(h=g.outerWidth(!0),h=1>=h?1:h,f&&a(b).bind("resize",function(){var a=e.width();f(a>0?Math.floor(a/h):1)}))}},c.bindingHandlers.quickReplyAnim={update:C?null:function(b,c){var d=b.jqTextarea||null,e=b.jqStatus||null,f=b.jqButtons||null,g=b.jqElement||null,h=b.oPrevActions||null,i=c(),j=null;j=_.defaults(i,{saveAction:!1,sendAction:!1,activeAction:!1}),g||(b.jqElement=g=a(b),b.jqTextarea=d=g.find("textarea"),b.jqStatus=e=g.find(".status"),b.jqButtons=f=g.find(".buttons"),b.oPrevActions=h={saveAction:null,sendAction:null,activeAction:null}),g.is(":visible")&&(y.browser.ie9AndBelow?(!d||g.defualtHeight||d.defualtHeight||(g.defualtHeight=g.outerHeight(),d.defualtHeight=d.outerHeight(),e.defualtHeight=f.outerHeight(),f.defualtHeight=f.outerHeight()),_.defer(function(){var a=h.activeAction!==j.activeAction,b=h.sendAction!==j.sendAction,c=h.saveAction!==j.saveAction;a&&(j.activeAction?(d.animate({height:d.defualtHeight+50},300),g.animate({"max-height":g.defualtHeight+f.defualtHeight+50},300)):(d.animate({height:d.defualtHeight},300),g.animate({"max-height":g.defualtHeight},300))),(b||c)&&(j.sendAction?(g.animate({"max-height":"30px"},300),e.animate({"max-height":"30px",opacity:1},300)):j.saveAction?g.animate({"max-height":0},300):(g.animate({"max-height":g.defualtHeight+f.defualtHeight+50},300),e.animate({"max-height":0,opacity:0},300)))})):(g.toggleClass("saving",j.saveAction),g.toggleClass("sending",j.sendAction),g.toggleClass("active",j.activeAction))),_.defer(function(){h=j})}},c.extenders.reversible=function(a){var b=a();return a.commit=function(){b=a()},a.revert=function(){a(b)},a.commitedValue=function(){return b},a.changed=function(){return b!==a()},a},c.extenders.autoResetToFalse=function(a,c){return a.iTimeout=0,a.subscribe(function(d){d&&(b.clearTimeout(a.iTimeout),a.iTimeout=b.setTimeout(function(){a.iTimeout=0,a(!1)},w.pInt(c)))}),a},w.createCommand=function(a,b,d){var e=b?function(){return e.canExecute&&e.canExecute()?b.apply(a,Array.prototype.slice.call(arguments)):!1}:function(){};return e.enabled=c.observable(!0),d=w.isUnd(d)?!0:d,e.canExecute=w.isFunc(d)?c.computed(function(){return e.enabled()&&d.call(a)}):c.computed(function(){return e.enabled()&&!!d}),e},c.bindingHandlers.autocomplete={init:function(b,c){function d(a){return a.split(/,\s*/)}function e(a){return d(a).pop()}var f=c(),g=a(b);f&&g&&g[0]&&g.autocomplete({minLength:1,autoFocus:!0,source:function(a,b){f(e(a.term),b)},search:function(){var a=e(this.value);return a.length<1?!1:!0},focus:function(){return!1},select:function(a,b){var c=d(this.value),e=null;return c.pop(),c.push(b.item.value),c.push(""),this.value=c.join(", ").slice(0,-2),g.trigger("change"),e=function(a){var b=a.value.length;a.blur(),a.focus(),a.setSelectionRange&&a.setSelectionRange(b,b)},e(g[0]),!1}})}},c.bindingHandlers.autocompleteSimple={init:function(b,c){var d=a(b),e=c(),f=e.callback,g=e.dataAccessor,h=e.autocompleteTrigger;f&&d&&d[0]&&(a.widget("custom.autocomplete",a.ui.autocomplete,{_renderMenu:function(b,c){var d=this,e="";a.each(c,function(a,c){c.category&&c.category!==e&&(b.append("<li class='ui-autocomplete-category'>"+c.category+"</li>"),e=c.category),d._renderItemData(b,c)})}}),d.autocomplete({minLength:1,autoFocus:!0,source:function(a,b){f(a.term,b)},focus:function(){return!1},select:function(a,b){return _.delay(function(){d.trigger("change")},5),g&&g(b.item),!0}}),h&&h.subscribe(function(){d.autocomplete("option","minLength",0),d.autocomplete("search"),d.autocomplete("option","minLength",1)},this))}},c.bindingHandlers.draggablePlace={init:C?null:function(b,d,e,f){if(null===d())return null;var g=e?e():null;a(b).draggable({distance:20,handle:".dragHandle",cursorAt:{top:0,left:0},helper:function(a){return d().call(f,a&&a.target?c.dataFor(a.target):null)},start:g&&g.draggableDragStartCallback?g.draggableDragStartCallback:w.emptyFunction,stop:g&&g.draggableDragStopCallback?g.draggableDragStopCallback:w.emptyFunction}).on("mousedown",function(){w.removeActiveFocus()})}},c.bindingHandlers.droppable={init:C?null:function(b,c){var d=c(),e=d.valueFunc,f=d.switchObserv;!1!==e&&a(b).droppable({hoverClass:"droppableHover",drop:function(a,b){e(a,b)}}),f&&e!==!1&&(f.subscribe(function(c){a(b).data().droppable&&(c?a(b).droppable("disable"):a(b).droppable("enable"))},this),f.valueHasMutated())}},c.bindingHandlers.draggable={init:C?null:function(b,d){a(b).attr("draggable",c.utils.unwrapObservable(d()))}},c.bindingHandlers.autosize={init:function(b,c){var d=a(b),e=c(),f=d.height(),g=d.outerHeight(),h=d.innerHeight(),i=g-h,j=h-f,k=e.minHeight?e.minHeight:0,l=e.maxHeight?e.maxHeight:0,m=e.scrollableHeight?e.scrollableHeight:1e3,n=e.autosizeTrigger?e.autosizeTrigger:null,o=function(a){var b=0;y.browser.firefox&&(b=2*parseInt(d.css("padding-top"),10)),l?setTimeout(function(){d.prop("scrollHeight")<l?(d.height(k-j-i),d.height(d.prop("scrollHeight")+b-j)):d.height(l-j-i)},100):(a||d.prop("scrollHeight")<m)&&setTimeout(function(){d.height(k-j-i),d.height(d.prop("scrollHeight")+b-j)},100)};d.on("keydown",function(){o()}),d.on("paste",function(){o()}),n&&n.subscribe(function(a){o(a)},this),o()}},c.bindingHandlers.customBind={init:function(a,b,d,e){var f=b(),g=f.onKeydown?f.onKeydown:null,h=f.onKeyup?f.onKeyup:null,i=f.onPaste?f.onPaste:null,j=f.onInput?f.onInput:null,k=f.valueObserver?f.valueObserver:null;c.bindingHandlers.event.init(a,function(){return{keydown:function(b,c){return g&&g.call(this,a,c,k),!0},keyup:function(b,c){return h&&h.call(this,a,c,k),!0},paste:function(b,c){return i&&i.call(this,a,c,k),!0},input:function(b,c){return j&&j.call(this,a,c,k),!0}}},d,e)}},c.bindingHandlers.fade={init:function(b,c){var d=a(b),e=a('<span class="faded"></span>'),f=_.defaults(c(),{color:null,css:"fadeout"}),g=f.color,h=f.css,i=function(a){if(""!==a){var b=j(a),c="rgba("+b.r+","+b.g+","+b.b;k(a,c)}},j=function(a){var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return a=a.replace(b,function(a,b,c,d){return b+b+c+c+d+d}),c?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)}:null},k=function(a,b){w.isRTL()?e.css("filter","progid:DXImageTransform.Microsoft.gradient(startColorstr='"+a+"', endColorstr='"+a+"',GradientType=1 )").css("background-image","-webkit-gradient(linear, left top, right top, color-stop(0%,"+b+",1)), color-stop(100%,"+b+",0)))").css("background-image","-moz-linear-gradient(left, "+b+",1)0%, "+b+",0)100%)").css("background-image","-webkit-linear-gradient(left, "+b+"1)0%,"+b+",0)100%)").css("background-image","-o-linear-gradient(left, "+b+",1)0%,"+b+",0)100%)").css("background-image","-ms-linear-gradient(left, "+b+",1)0%,"+b+",0)100%)").css("background-image","linear-gradient(left, "+b+",1)0%,"+b+",0)100%)"):e.css("filter","progid:DXImageTransform.Microsoft.gradient(startColorstr='"+a+"', endColorstr='"+a+"',GradientType=1 )").css("background-image","-webkit-gradient(linear, left top, right top, color-stop(0%,"+b+",0)), color-stop(100%,"+b+",1)))").css("background-image","-moz-linear-gradient(left, "+b+",0)0%, "+b+",1)100%)").css("background-image","-webkit-linear-gradient(left, "+b+",0)0%,"+b+",1)100%)").css("background-image","-o-linear-gradient(left, "+b+",0)0%,"+b+",1)100%)").css("background-image","-ms-linear-gradient(left, "+b+",0)0%,"+b+",1)100%)").css("background-image","linear-gradient(left, "+b+",0)0%,"+b+",1)100%)")};d.parent().addClass(h),d.after(e),void 0!==f.color.subscribe&&(i(g()),g.subscribe(function(a){i(a)},this))}},c.bindingHandlers.highlighter={init:function(d,e,f,g){function h(b){if(x){var c=0,d=k.text(),e=d.split(q),f=[],g='<span class="search_highlight">$&</span>';a.each(e,function(b,c){_.any(p,function(a){return a===c})?a.each(c,function(b,c){f.push(a(c.replace(/(.)/,g)))}):a.each(c,function(a,b){" "===b?f.push(document.createTextNode(" ")):f.push(document.createTextNode(b))})}),b?k.empty().append(f):(c=i(),k.empty().append(f),j(c))}}function i(){var a,c,e,f,g=0;return"undefined"!=typeof b.getSelection?(a=b.getSelection().getRangeAt(0),c=a.cloneRange(),c.selectNodeContents(d),c.setEnd(a.endContainer,a.endOffset),g=c.toString().length):"undefined"!=typeof document.selection&&"Control"!==document.selection.type&&(e=document.selection.createRange(),f=document.body.createTextRange(),f.moveToElementText(d),f.setEndPoint("EndToEnd",e),g=f.text.length),g}function j(a){var c,e,f;if(!d)return!1;if(document.createRange)c=document.createRange(),c.selectNodeContents(d),c.setStart(d,a),c.setEnd(d,a),e=b.getSelection(),e.removeAllRanges(),e.addRange(c);else{if(d.createTextRange)return f=d.createTextRange(),f.collapse(!0),f.moveEnd(a),f.moveStart(a),f.select(),!0;if(d.setSelectionRange)return d.setSelectionRange(a,a),!0}return!1}var k=a(d),l=e(),m=l.valueObserver?l.valueObserver:null,n=l.highlighterValueObserver?l.highlighterValueObserver:null,o=l.highlightTrigger?l.highlightTrigger:null,p=["from:","to:","subject:","text:","email:","has:","date:","text:","body:"],q=function(){var b="";return a.each(p,function(a,c){b=a?b+"|\\b"+c:b+"\\b"+c}),new RegExp("("+b+")","g")}(),r=function(a){return a.replace(/[\s]+/," ")},s=-1,t=b.navigator.language||b.navigator.userLanguage,u=["zh","zh-TW","zh-CN","zh-HK","zh-SG","zh-MO","ja","ja-JP","ko","ko-KR","vi","vi-VN","th","th-TH"],x=!_.include(u,t);c.bindingHandlers.event.init(d,function(){return{keydown:function(a,b){return b.keyCode!==v.Key.Enter},keyup:function(a,b){var c=[v.Key.Left,v.Key.Right,v.Key.Home,v.Key.End],d=-1!==w.inArray(b.keyCode,c);return b.keyCode===v.Key.Enter||b.keyCode===v.Key.Shift||b.keyCode===v.Key.Ctrl||b.keyCode===v.Key.Dash||b.keyCode===v.Key.Apostrophe||b.keyCode===v.Key.Six&&b.shiftKey||d||(b.ctrlKey||s===v.Key.Ctrl)&&b.keyCode===v.Key.a||(m(r(k.text())),h(!1)),s=b.keyCode,!0},paste:function(){return setTimeout(function(){m(r(k.text())),h(!1)},0),!0}}},f,g),setTimeout(function(){h(!0)},0),o.notifySubscribers(),o.subscribe(function(a){setTimeout(function(){h(!!a)},0)},this),n.subscribe(function(){k.text(m())},this)}},c.bindingHandlers.quoteText={init:function(c,d,e,f){var g=(a(c),a('<span class="button_quote">'+w.i18n("HELPDESK/BUTTON_QUOTE")+"</span>")),h=d(),i=h.actionHandler,j=!1,k="";a("#pSevenContent").append(g),a(document.body).on("click",function(c){j=!!a(c.target).parents(".posts")[0],k=b.getSelection?document.getSelection().toString():document.selection.createRange().text,j?""!==k.replace(/[\n\r\s]/,"")?g.css({top:c.clientY+20,left:c.clientX+20}).show():g.hide():g.hide()}),g.on("click",function(){i.call(f,k)})}},w.inArray=a.inArray,w.isFunc=a.isFunction,w.trim=a.trim,w.emptyFunction=function(){},w.isUnd=function(a){return void 0===a},w.isNull=function(a){return null===a},w.isNormal=function(a){return!w.isUnd(a)&&!w.isNull(a)},w.isNumeric=function(a){return w.isNormal(a)?/^[1-9]+[0-9]*$/.test(a.toString()):!1},w.pInt=function(a){return w.isNormal(a)&&""!==a?b.parseInt(a,10):0},w.pString=function(a){return w.isNormal(a)?a.toString():""},w.isNonEmptyArray=function(a,b){return b=b||1,_.isArray(a)&&b<=a.length},w.pImport=function(a,b,c){a[b]=c},w.pExport=function(a,b,c){return w.isUnd(a[b])?c:a[b]},w.encodeHtml=function(a){return a?a.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""},w.i18n=function(a,b,c,d){var e="",f=w.isUnd(x[a])?w.isNormal(c)?c:a:x[a];if(w.isUnd(d)||(f=function(a,b){var c=w.getPlural(A.User.DefaultLanguage,a),d=b.split("|");return d&&d[c]?d[c]:d&&d[0]?d[0]:b}(d,f)),w.isNormal(b))for(e in b)b.hasOwnProperty(e)&&(f=f.replace("%"+e+"%",b[e]));return f},w.roundNumber=function(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)},w.friendlySize=function(a){var b=1024,c=b*b,d=b*b*b;return a=w.pInt(a),a>=d?w.roundNumber(a/d,1)+w.i18n("MAIN/GIGABYTES"):a>=c?w.roundNumber(a/c,1)+w.i18n("MAIN/MEGABYTES"):a>=b?w.roundNumber(a/b,0)+w.i18n("MAIN/KILOBYTES"):a+w.i18n("MAIN/BYTES")},w.timeOutAction=function(){var a={};return function(c,d,e){w.isUnd(a[c])&&(a[c]=0),b.clearTimeout(a[c]),a[c]=b.setTimeout(d,e)}}(),w.$log=null,w.log=function(){function b(a,b){return"string"==typeof b&&b.length>50?b.substring(0,50):b}if(A&&A.ClientDebug&&y.browser&&!y.browser.ie9AndBelow){var c=w.$log||a('<div style="display: none;"></div>').appendTo("body"),d=c.html(),e=d.split(/<br {0,1}\/{0,1}><br {0,1}\/{0,1}>/),f=[];_.each(arguments,function(a){var c="string"==typeof a?a:JSON.stringify(a,b);0===f.length&&(c="<b>"+c+"</b>"),f.push(c)}),w.$log=c,e.length>200&&e.shift(),e.push(w.encodeHtml(f.join(", "))),c.html(e.join("<br /><br />"))}},w.getAjaxDataForLog=function(a,b){var c=b;if(b&&b.Result)switch(a){case"MessageList":case"MessageListByUids":c={Result:{Uids:b.Result.Uids,UidNext:b.Result.UidNext,FolderHash:b.Result.FolderHash,MessageCount:b.Result.MessageCount,MessageUnseenCount:b.Result.MessageUnseenCount,MessageResultCount:b.Result.MessageResultCount}};break;case"Message":c={Result:{Folder:b.Result.Folder,Uid:b.Result.Uid,Subject:b.Result.Subject,Size:b.Result.Size,TextSize:b.Result.TextSize,From:b.Result.From,To:b.Result.To}};break;case"Messages":c={Result:_.map(b.Result,function(a){return{Uid:a.Uid,Subject:a.Subject}})}}else b&&(c={Result:b.Result,ErrorCode:b.ErrorCode});return c},w.getEmailParts=function(a){for(var b=a.indexOf('"'),c=a.indexOf('"',b+1),d=a.indexOf("<",c),e=-1,f=-1,g="",h="";-1!==d;)e=d,d=a.indexOf("<",d+1);return d=e,f=a.indexOf(">",d+1),-1===d?h=w.trim(a):(g=-1===b?w.trim(a.substring(0,d)):w.trim(a.substring(b+1,c)),h=w.trim(a.substring(d+1,f))),{name:g,email:h,FullEmail:a}},w.isCorrectEmail=function(a){return!!a.match(/^[A-Z0-9\"!#\$%\^\{\}`~&'\+\-=_\.]+@[A-Z0-9\.\-]+$/i)},w.getIncorrectEmailsFromAddressString=function(a){for(var b=a.replace(/"[^"]*"/g,"").replace(/;/g,",").split(","),c=[],d=0,e=b.length,f="",g=null;e>d;d++)f=w.trim(b[d]),f.length>0&&(g=w.getEmailParts(w.trim(b[d])),w.isCorrectEmail(g.email)||c.push(g.email));return c},w.getArrayRecipients=function(a){if(!a)return[];for(var b=[],c=w.trim(a)+" ",d=0,e=0,f=!1,g='"',h=!1,i=!1,j=0,k=c.length,l="",m="",n=null,o=!1,p=0,q=0;k>j;){switch(l=c.substring(j,j+1)){case"'":case'"':f?g===l&&(f=!1):h||i||(g=l,f=!0);break;case"<":f||h||i||(h=!0);break;case">":h&&(h=!1);break;case"(":f||h||i||(i=!0);break;case")":i&&(i=!1);break;default:if(","!==l&&";"!==l&&j!==k-1)break;if(!h&&!i&&!f){if(e=j!==k-1?j:k,m=c.substring(d,e),w.trim(m).length>0){for(n=w.getEmailParts(m),o=!1,p=b.length,q=0;p>q;q++)b[q].email===n.email&&(o=!0);!o&&w.isCorrectEmail(n.email)&&b.push(n)}d=j+1}}j++}return b},w.getImportContactsLink=function(){return"?/ImportContacts/"},w.getExportContactsLink=function(){return"?/Raw/Contacts/"},w.getExportCalendarLinkByHash=function(a,b){return"?/Raw/Calendar/"+a+"/"+b},w.getDownloadLinkByHash=function(a,b,c,d){return c=w.isUnd(c)?!1:!!c,d=w.isUnd(d)?"":d,"?/Raw/Download/"+a+"/"+b+"/"+(c?"1":"0")+(""===d?"":"/"+d)},w.getViewLinkByHash=function(a,b,c,d){return c=w.isUnd(c)?!1:!!c,d=w.isUnd(d)?"":d,"?/Raw/View/"+a+"/"+b+"/"+(c?"1":"0")+(""===d?"":"/"+d)},w.getViewThumbnailLinkByHash=function(a,b,c,d){return c=w.isUnd(c)?!1:!!c,d=w.isUnd(d)?"":d,"?/Raw/Thumbnail/"+a+"/"+b+"/"+(c?"1":"0")+(""===d?"":"/"+d)},w.getFilestorageDownloadLinkByHash=function(a,b,c){var d="?/Raw/FilesDownload/"+a+"/"+b;return w.isUnd(c)||(d=d+"/0/"+c),d},w.getFilestorageViewLinkByHash=function(a,b,c){var d="?/Raw/FilesView/"+a+"/"+b;return w.isUnd(c)||(d=d+"/0/"+c),d},w.getFilestorageViewThumbnailLinkByHash=function(a,b,c){var d="?/Raw/FilesThumbnail/"+a+"/"+b;return w.isUnd(c)||(d=d+"/0/"+c),d},w.getFilestoragePublicViewLinkByHash=function(a){return"?/Window/Files/0/"+a},w.getFilestoragePublicDownloadLinkByHash=function(a){return"?/Raw/FilesPub/0/"+a},w.daysInMonth=function(a,b){return a>0&&13>a&&b>0?new Date(b,a,0).getDate():31},w.getAppPath=function(){return b.location.protocol+"//"+b.location.host+b.location.pathname},w.WindowOpener={_iDefaultRatio:.8,_aOpenedWins:[],openMessage:function(a,b){if(a){var c=a.folder(),d=a.uid(),e="",f=null;e=b?y.Routing.buildHashFromArray([v.Screens.SingleCompose,"drafts",c,d]):y.Routing.buildHashFromArray([v.Screens.SingleMessageView,c,"msg"+d]),f=this.openTab(e)}},openTab:function(a){var c=null;return c=b.open(a,"_blank"),c.focus(),c.name=A.Accounts.currentId(),this._aOpenedWins.push(c),c},open:function(a,c,d){var e=d?",menubar=yes":",menubar=no",f="location=no,toolbar=no,status=no,scrollbars=yes,resizable=yes"+e,g=null;return c=c.replace(/\W/g,""),f+=this._getSizeParameters(),g=b.open(a,c,f),g.focus(),g.name=A.Accounts.currentId(),this._aOpenedWins.push(g),g},closeAll:function(){for(var a=this._aOpenedWins.length,b=0,c=null;a>b;b++)c=this._aOpenedWins[b],c.closed||c.close();this._aOpenedWins=[]},_getSizeParameters:function(){var a=b.screen.width,c=Math.ceil(a*this._iDefaultRatio),d=Math.ceil((a-c)/2),e=b.screen.height,f=Math.ceil(e*this._iDefaultRatio),g=Math.ceil((e-f)/2);return",width="+c+",height="+f+",top="+g+",left="+d}},w.moveCaretToEnd=function(a){var b,c;a.createTextRange?(b=a.createTextRange(),b.collapse(!1),b.select()):a.setSelectionRange&&(c=2*a.value.length,a.setSelectionRange(c,c))},w.delegateRun=function(a,b,c){a&&a[b]&&a[b].apply(a,_.isArray(c)?c:[])},w.strRepeat=function(a,b){return new Array(b+1).join(a)},w.deferredUpdate=function(a,c,d,e){!a.__interval&&c?(a.__state=!0,e(a,!0),a.__interval=b.setInterval(function(){a.__state||(e(a,!1),b.clearInterval(a.__interval),a.__interval=null)},d)):c||(a.__state=!1)},w.draggableMessages=function(){return a('<div class="draggable draggableMessages"><div class="content"><span class="count-text"></span></div></div>').appendTo("#pSevenHidden")},w.draggableContacts=function(){return a('<div class="draggable draggableContacts"><div class="content"><span class="count-text"></span></div></div>').appendTo("#pSevenHidden")},w.removeActiveFocus=function(){if(document&&document.activeElement&&document.activeElement.blur){var b=a(document.activeElement);(b.is("input")||b.is("textarea"))&&document.activeElement.blur()}},w.uiDropHelperAnim=function(b,c){var d=c.helper.clone().appendTo("#pSevenHidden"),e=a(b.target).find(".animGoal"),f=e[0]?e.offset():a(b.target).offset();d.animate({left:f.left+"px",top:f.top+"px","font-size":"0px",opacity:0},800,"easeOutQuint",function(){a(this).remove()})},w.isTextFieldFocused=function(){var a=document&&document.activeElement?document.activeElement:null,b=a?a.tagName:null,c=a&&a.type?a.type.toLowerCase():null,d=a?a.contentEditable:null;return"INPUT"===b&&("text"===c||"password"===c||"email"===c)||"TEXTAREA"===b||"IFRAME"===b||"true"===d},w.removeSelection=function(){b.getSelection?b.getSelection().removeAllRanges():document.selection&&document.selection.empty()},w.getMonthNamesArray=function(){for(var a=w.i18n("DATETIME/MONTH_NAMES").split(" "),b=12,c=a.length;b>c;c++)a[c]="";return a},w.getPlural=function(a,b){var c=0;switch(b=w.pInt(b),a){case"Arabic":c=0===b?0:1===b?1:2===b?2:b%100>=3&&10>=b%100?3:b%100>=11?4:5;break;case"Bulgarian":c=1===b?0:1;break;case"Chinese-Simplified":c=0;break;case"Chinese-Traditional":c=1===b?0:1;break;case"Czech":c=1===b?0:b>=2&&4>=b?1:2;break;case"Danish":c=1===b?0:1;break;case"Dutch":c=1===b?0:1;break;case"English":c=1===b?0:1;break;case"Estonian":c=1===b?0:1;break;case"Finish":c=1===b?0:1;break;case"French":c=1===b?0:1;break;case"German":c=1===b?0:1;break;case"Greek":c=1===b?0:1;break;case"Hebrew":c=1===b?0:1;break;case"Hungarian":c=1===b?0:1;break;case"Italian":c=1===b?0:1;break;case"Japanese":c=0;break;case"Korean":c=0;break;case"Latvian":c=b%10===1&&b%100!==11?0:0!==b?1:2;break;case"Lithuanian":c=b%10===1&&b%100!==11?0:b%10>=2&&(10>b%100||b%100>=20)?1:2;break;case"Norwegian":c=1===b?0:1;break;case"Persian":c=0;break;case"Polish":c=1===b?0:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?1:2;break;case"Portuguese-Portuguese":c=1===b?0:1;break;case"Portuguese-Brazil":c=1===b?0:1;break;case"Romanian":c=1===b?0:0===b||b%100>0&&20>b%100?1:2;break;case"Russian":c=b%10===1&&b%100!==11?0:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?1:2;break;case"Serbian":c=b%10===1&&b%100!==11?0:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?1:2;break;case"Spanish":c=1===b?0:1;break;case"Swedish":c=1===b?0:1;break;case"Thai":c=0;break;case"Turkish":c=1===b?0:1;break;case"Ukrainian":c=b%10===1&&b%100!==11?0:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?1:2;break;default:c=0}return c},w.getFileExtension=function(a){var b="",c=a.lastIndexOf(".");return c>-1&&(b=a.substr(c+1)),b},w.getFileNameWithoutExtension=function(a){var b=a,c=a.lastIndexOf(".");return c>-1&&(b=a.substr(0,c)),b},w.defaultOptionsAfterRender=function(a,b){b&&(w.isUnd(b.disable)||c.applyBindingsToNode(a,{disable:b.disable},b))},w.getDateFormatForMoment=function(a){var b="MM/DD/YYYY";switch(a){case"MM/DD/YYYY":b="MM/DD/YYYY";break;case"DD/MM/YYYY":b="DD/MM/YYYY";break;case"DD Month YYYY":b="DD MMMM YYYY"}return b},w.getDateFormatForDatePicker=function(a){var b="mm/dd/yy";switch(a){case"MM/DD/YYYY":b="mm/dd/yy";break;case"DD/MM/YYYY":b="dd/mm/yy";break;case"DD Month YYYY":b="dd MM yy"}return b},w.getDateFormatsForSelector=function(){return _.map(A.App.DateFormats,function(a){switch(a){case"MM/DD/YYYY":return{name:w.i18n("DATETIME/DATEFORMAT_MMDDYYYY"),value:a};case"DD/MM/YYYY":return{name:w.i18n("DATETIME/DATEFORMAT_DDMMYYYY"),value:a};case"DD Month YYYY":return{name:w.i18n("DATETIME/DATEFORMAT_DDMONTHYYYY"),value:a};default:return{name:a,value:a}}})},w.getTitleForEvent=function(a){var b=w.trim(a.replace(/[\n\r]/," ")),c=b.indexOf(" ",180);return c>=0&&(b=b.substring(0,c)+"..."),b.length>200&&(b=b.substring(0,200)+"..."),b},w.getFormattedPhone=function(a){var b,c={"+7":"8"},d=/#/g.test(a)?a.split("#")[1]:a.replace(/[()\s_\-]/g,""),e=(a+"").slice(0,2);return b=_.any(c,function(a,b){return b===e},this),b?d.replace(e,c[e]):d.replace(/[+]/g,"")},w.desktopNotify=function(){var a,c=0;return function(d,e,f,g,h,i){if("show"===d){var j,k=null,l={body:f,dir:"auto",lang:"",icon:""!==g?g:!1};if(b.Notification&&b.Notification.permission)switch(k=b.Notification,b.Notification.permission.toLowerCase()){case"granted":j=v.DesktopNotifications.Allowed;break;case"denied":j=v.DesktopNotifications.Denied;break;case"default":j=v.DesktopNotifications.NotAllowed}else b.webkitNotifications&&b.webkitNotifications.checkPermission&&(k=b.webkitNotifications,j=b.webkitNotifications.checkPermission());k&&j===v.DesktopNotifications.Allowed&&(a&&a.close(),a=new b.Notification(e,l),clearTimeout(c),i&&(c=setTimeout(function(){a.close()},i)),a.onclick=function(){h&&h(),a.close()},a.onshow=function(){},a.onclose=function(){},a.onerror=function(){})}else"hide"===d&&a&&a.close()}}(),w.isRTL=function(){return D.hasClass("rtl")},w.shadeColor=function(a,c){var d=!1,e=0,f=0,g=0,h=0;return"#"===a[0]&&(a=a.slice(1),d=!0),e=b.parseInt(a,16),f=(e>>16)+c,f>255?f=255:0>f&&(f=0),g=(e>>8&255)+c,g>255?g=255:0>g&&(g=0),h=(255&e)+c,h>255?h=255:0>h&&(h=0),(d?"#":"")+(h|g<<8|f<<16).toString(16)},w.extend=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a},w.thumbQueue=function(){var a={},b={},c=2;return function(d,e,f){e&&f?!(d in b)||b[d]>0?(f(e),d in b||(b[d]=c,a[d]=[]),b[d]--):a[d].push({imageSrc:e,imageSrcObserver:f,messageUid:d}):a[d]&&a[d].length&&(a[d][0].imageSrcObserver(a[d][0].imageSrc),a[d].shift())}}(),w.checkConnection=function(){var a=-1;return function(b,c){clearTimeout(a),c.Result?y.Api.hideError(!0):"Ping"===b?(y.Api.showError(w.i18n("WARNING/NO_INTERNET_CONNECTION"),!1,!0,!0),a=setTimeout(function(){y.Ajax.send({Action:"Ping"})},6e4)):y.Ajax.send({Action:"Ping"})}}(),f.prototype.iTimer=0,f.prototype.bResetCheckedOnClick=!1,f.prototype.bCheckOnSelect=!1,f.prototype.bUnselectOnCtrl=!1,f.prototype.bDisableMultiplySelection=!1,f.prototype.setBeforeSelectCallback=function(a){this.fBeforeSelectCallback=a||null},f.prototype.initOnApplyBindings=function(b,d,e,f,g){a(document).on("keydown",this.onKeydownBinded),this.oListScope=f,this.oScrollScope=g,this.sActionSelector=b,this.sSelectabelSelector=d,this.sCheckboxSelector=e;var h=this,i=function(a,b){var c=0,d=0,e=null,f=!1,g=!1,i=[],j=!1;if(a=a?a:null,b&&b.shiftKey&&null!==a&&null!==h.oLast&&a!==h.oLast)for(i=h.list(),j=a.checked(),c=0,d=i.length;d>c;c++)e=i[c],f=!1,(e===h.oLast||e===a)&&(f=!0),f&&(g=!g),(g||f)&&e.checked(j);a&&(h.oLast=a)};a(this.oListScope).on("dblclick",b,function(a){var b=c.dataFor(this);!b||!a||a.ctrlKey||a.altKey||a.shiftKey||h.onDblClick(b)}),G&&a(this.oListScope).on("touchstart",b,function(b){if(b){var c=b.timeStamp,d=a(this).data("lastTouch")||c,e=c-d,f=b.originalEvent&&b.originalEvent.touches?b.originalEvent.touches.length:0;a(this).data("lastTouch",c),!e||e>250||f>1||(b.preventDefault(),a(this).trigger("dblclick"))}}),a(this.oListScope).on("click",b,function(a){var b=!0,d=null,e=c.dataFor(this);e&&a&&(a.shiftKey?(b=!1,h.bDisableMultiplySelection||(null===h.oLast&&(h.oLast=e),e.checked(!e.checked()),i(e,a))):a.ctrlKey&&(b=!1,h.bDisableMultiplySelection||(h.oLast=e,d=h.itemSelected(),!d||d.checked()||e.checked()||d.checked(!0),h.bUnselectOnCtrl&&e===h.itemSelected()?(e.checked(!e.selected()),h.itemSelected(null)):e.checked(!e.checked()))),b&&h.onSelect(e))}),a(this.oListScope).on("click",e,function(a){var b=c.dataFor(this);b&&a&&!h.bDisableMultiplySelection&&(a.shiftKey?(null===h.oLast&&(h.oLast=b),i(b,a)):h.oLast=b),a&&a.stopPropagation&&a.stopPropagation()}),a(this.oListScope).on("dblclick",e,function(a){a&&a.stopPropagation&&a.stopPropagation()})},f.prototype.getResultSelection=function(a,b){var c=this,d=!1,e=!1,f=null,g=this.iFactor,h=!!this.multiplyLineFactor,i=0,j=0,k=[];if(!a&&-1<w.inArray(b,[this.KeyUp,this.KeyDown,this.KeyLeft,this.KeyRight,v.Key.PageUp,v.Key.PageDown,v.Key.Home,v.Key.End]))k=this.list(),k&&0<k.length&&(-1<w.inArray(b,[this.KeyDown,this.KeyRight,v.Key.PageUp,v.Key.Home])?f=k[0]:-1<w.inArray(b,[this.KeyUp,this.KeyLeft,v.Key.PageDown,v.Key.End])&&(f=k[k.length-1]));else if(a&&(k=this.list(),j=k?k.length:0,j>0))if(v.Key.Home===b||v.Key.PageUp===b||v.Key.End===b||v.Key.PageDown===b||h&&(v.Key.Left===b||v.Key.Right===b)||!h&&(v.Key.Up===b||v.Key.Down===b))_.each(k,function(g){if(!d)switch(b){case c.KeyUp:case c.KeyLeft:a===g?d=!0:f=g;break;case v.Key.Home:case v.Key.PageUp:f=g,d=!0;break;case c.KeyDown:case c.KeyRight:e?(f=g,d=!0):a===g&&(e=!0);break;case v.Key.End:case v.Key.PageDown:f=g}});else if(h&&this.KeyDown===b){for(;j>i;i++)if(a===k[i]){i+=g,i>j-1&&(i-=g),f=k[i];break}}else if(h&&this.KeyUp===b)for(i=j;i>=0;i--)if(a===k[i]){i-=g,0>i&&(i+=g),f=k[i];break}return f},f.prototype.shiftClickResult=function(a,b,c){if(b){var d=!!this.multiplyLineFactor,e=!1,f=!1;-1<w.inArray(c,d?[v.Key.Left,v.Key.Right]:[v.Key.Up,v.Key.Down])?b.checked(!b.checked()):-1<w.inArray(c,d?[v.Key.Up,v.Key.Down,v.Key.PageUp,v.Key.PageDown,v.Key.Home,v.Key.End]:[v.Key.Left,v.Key.Right,v.Key.PageUp,v.Key.PageDown,v.Key.Home,v.Key.End])&&(f=!b.checked(),_.each(this.list(),function(c){var d=!1;(c===a||b===c)&&(e=!e,d=!0),(e||d)&&(c.checked(f),d=!1)}),d&&a&&(c===v.Key.Up||c===v.Key.Down)&&a.checked(!a.checked()))}},f.prototype.clickNewSelectPosition=function(a,c){var d=this,e=0,f=null,g=this.itemSelected();f=this.getResultSelection(g,a),f?(c&&this.shiftClickResult(f,g,a),f&&this.fBeforeSelectCallback?(this.fBeforeSelectCallback(f,function(a){a&&(d.itemSelected(f),e=0===d.iTimer?50:150,0!==d.iTimer&&b.clearTimeout(d.iTimer),d.iTimer=b.setTimeout(function(){d.iTimer=0,d.onSelect(f,!1)},e))}),this.scrollToSelected()):(this.itemSelected(f),e=0===this.iTimer?50:150,0!==this.iTimer&&b.clearTimeout(this.iTimer),this.iTimer=b.setTimeout(function(){d.iTimer=0,d.onSelect(f)},e),this.scrollToSelected())):g&&c&&-1<w.inArray(a,[this.KeyUp,this.KeyDown,this.KeyLeft,this.KeyRight,v.Key.PageUp,v.Key.PageDown,v.Key.Home,v.Key.End])&&g.checked(!g.checked())},f.prototype.onKeydown=function(a){var b=!0,c=0;return this.useKeyboardKeys()&&a&&!w.isTextFieldFocused()&&(c=a.keyCode,a.ctrlKey||this.KeyUp!==c&&this.KeyDown!==c&&this.KeyLeft!==c&&this.KeyRight!==c&&v.Key.PageUp!==c&&v.Key.PageDown!==c&&v.Key.Home!==c&&v.Key.End!==c?v.Key.Del!==c||a.ctrlKey||a.shiftKey?v.Key.Enter===c?0<this.list().length&&!a.ctrlKey&&(this.onEnter(this.itemSelected()),b=!1):!a.ctrlKey||a.altKey||a.shiftKey||v.Key.a!==c||(this.checkAll(!(this.checkAll()&&!this.isIncompleteChecked())),b=!1):0<this.list().length&&(this.onDelete(),b=!1):(this.clickNewSelectPosition(c,a.shiftKey),b=!1)),b},f.prototype.onDelete=function(){this.fDeleteCallback.call(this,this.listCheckedOrSelected()),this.itemSelected(null),this.listChecked(!1)},f.prototype.onEnter=function(a){var b=this;a&&this.fBeforeSelectCallback?this.fBeforeSelectCallback(a,function(c){c&&(b.itemSelected(a),b.fEnterCallback.call(this,a))}):(this.itemSelected(a),this.fEnterCallback.call(this,a))},f.prototype.selectionFunc=function(a){this.itemSelected(null),this.bResetCheckedOnClick&&this.listChecked(!1),this.itemSelected(a),this.fSelectCallback.call(this,a)},f.prototype.onSelect=function(a,b){if(b=w.isUnd(b)?!0:!!b,this.fBeforeSelectCallback&&b){var c=this;this.fBeforeSelectCallback(a,function(b){b&&c.selectionFunc(a)})}else this.selectionFunc(a)},f.prototype.onDblClick=function(a){this.fDblClickCallback.call(this,a)},f.prototype.koCheckAll=function(){return c.computed({read:this.checkAll,write:this.checkAll,owner:this})},f.prototype.koCheckAllIncomplete=function(){return c.computed({read:this.isIncompleteChecked,write:this.isIncompleteChecked,owner:this})},f.prototype.scrollToSelected=function(){if(!this.oListScope||!this.oScrollScope)return!1;var b=20,c=a(this.sSelectabelSelector,this.oScrollScope),d=c.position(),e=this.oListScope.height(),f=c.outerHeight();return d&&(d.top<0||d.top+f>e)?(d.top<0?this.oScrollScope.scrollTop(this.oScrollScope.scrollTop()+d.top-b):this.oScrollScope.scrollTop(this.oScrollScope.scrollTop()+d.top-e+f+b),!0):!1},function(a){a.fn.splitter=function(c){return c=c||{},this.each(function(){var d=!1,e=c.name,f=0,g=0,h={},i={},j=function(b){d=!0,s.addClass(p.activeClass),p._posSplit=-((t?q._overallWidth-b[p.eventPos]:b[p.eventPos])-r.get(0)[p.pxSplit]),a("body").attr({unselectable:"on"}).addClass("unselectable"),a(document).bind("mousemove",k).bind("mouseup",l)},k=function(a){var b=(t?q._overallWidth-a[p.eventPos]:a[p.eventPos])+p._posSplit;m(b),w.isFunc(c.resizeFunc)&&c.resizeFunc()},l=function u(){s.removeClass(p.activeClass),a("body").attr({unselectable:"off"}).removeClass("unselectable"),e&&y.Storage.setData(e+"ResizerWidth",r.get(0)[p.pxSplit]),a(document).unbind("mousemove",k).unbind("mouseup",u),w.isFunc(c.resizeFunc)&&c.resizeFunc()},m=function(a){a=b.Math.max(r.get(0)._min,q._overallWidth-r.get(1)._max,b.Math.min(a,r.get(0)._max,q._overallWidth-r.get(1)._min)),r.get(0).$.css(p.split,a),r.get(1).$.css(p.split,q._overallWidth-a),y.browser.ie8AndBelow||r.trigger("resize")
},n=function(a){for(var c=0,d=1;d<arguments.length;d++)c+=b.Math.max(b.parseInt(a.css(arguments[d]),10)||0,0);return c},o=(c.splitHorizontal?"h":c.splitVertical?"v":c.type)||"v",p=a.extend({activeClass:"active",pxPerKey:8,tabIndex:0,accessKey:""},{v:{keyLeft:39,keyRight:37,type:"v",eventPos:"pageX",origin:"left",split:"width",pxSplit:"offsetWidth",side1:"Left",side2:"Right",fixed:"height",pxFixed:"offsetHeight",side3:"Top",side4:"Bottom"},h:{keyTop:40,keyBottom:38,type:"h",eventPos:"pageY",origin:"top",split:"height",pxSplit:"offsetHeight",side1:"Top",side2:"Bottom",fixed:"width",pxFixed:"offsetWidth",side3:"Left",side4:"Right"}}[o],c),q=a(this),r=a(">*:not(css3pie)",q).each(function(){this.$=a(this)}),s=a(".resize_handler",r.get(0)).attr({unselectable:"on"}).bind("mousedown",j),t="rtl"===q.css("direction");r.get(0)._paneName=p.side1,r.get(1)._paneName=p.side2,r.each(function(){this._min=p["min"+this._paneName]||n(this.$,"min-"+p.split),this._max=p["max"+this._paneName]||n(this.$,"max-"+p.split)||9999,this._init=void 0===p["size"+this._paneName]?b.parseInt(a.css(this,p.split),10):p["size"+this._paneName]}),f=e?y.Storage.getData(e+"ResizerWidth")||r.get(0)._init:r.get(0)._init,isNaN(f)&&(f=q[0][p.pxSplit],f=b.Math.round(f/r.length)),p.resizeToWidth&&!y.browser.ie8AndBelow&&a(b).bind("resize",function(a){a.target===this&&q.trigger("resize")}),q.bind("resize",function(a,b,c){var e=a.target.className+"_"+c;d&&(h={}),a.target===this&&(q._overallWidth=q[0][p.pxSplit],q._overallWidth<=0||(g=p.sizeRight||p.sizeBottom?q._overallWidth-r.get(1)[p.pxSplit]:r.get(0)[p.pxSplit],isNaN(b)?b=g:c&&(d=!1,h[e]?(b=h[e],h[e]=null):(b===g?(h[e]=null,b=i[e]):h[e]=i[e]=g,_.each(h,function(a,b){b!==e&&(h[b]=null)}))),m(b)))}).trigger("resize",[f])})}}(jQuery),g.prototype.openComposeMessage=function(a){y.Routing.setHash(y.Links.composeWithToField(a))},g.prototype.downloadByUrl=function(c){var d=null;G?b.open(c):(d=a('<iframe style="display: none;"></iframe>').appendTo(document.body),d.attr("src",c),setTimeout(function(){d.remove()},6e4))},g.prototype.showLoading=function(a){y.Screens.showLoading(a)},g.prototype.hideLoading=function(){y.Screens.hideLoading()},g.prototype.showReport=function(a,b){y.Screens.showReport(a,b)},g.prototype.showError=function(a,b,c,d){y.Screens.showError(a,b,c,d)},g.prototype.hideError=function(a){y.Screens.hideError(a)},g.prototype.showErrorByCode=function(a,b){var c=a.ErrorCode,d=a.ErrorMessage||"";switch(""!==d&&(d=" ("+d+")"),c){case v.Errors.AuthError:this.showError(w.i18n("WARNING/LOGIN_PASS_INCORRECT")+d);break;case v.Errors.DemoLimitations:this.showError(w.i18n("DEMO/WARNING_THIS_FEATURE_IS_DISABLED")+d);break;case v.Errors.Captcha:this.showError(w.i18n("WARNING/CAPTCHA_IS_INCORRECT")+d);break;case v.Errors.CanNotGetMessage:this.showError(w.i18n("MESSAGE/ERROR_MESSAGE_DELETED")+d);break;case v.Errors.CanNotChangePassword:this.showError(w.i18n("WARNING/UNABLE_CHANGE_PASSWORD")+d);break;case v.Errors.AccountOldPasswordNotCorrect:this.showError(w.i18n("WARNING/CURRENT_PASSWORD_NOT_CORRECT")+d);break;case v.Errors.FetcherIncServerNotAvailable:this.showError(w.i18n("WARNING/FETCHER_SAVE_ERROR")+d);break;case v.Errors.FetcherLoginNotCorrect:this.showError(w.i18n("WARNING/FETCHER_SAVE_ERROR")+d);break;case v.Errors.HelpdeskUserNotExists:this.showError(w.i18n("HELPDESK/ERROR_FORGOT_NO_ACCOUNT")+d);break;case v.Errors.MailServerError:this.showError(w.i18n("WARNING/CANT_CONNECT_TO_SERVER")+d);break;case v.Errors.DataTransferFailed:this.showError(w.i18n("WARNING/DATA_TRANSFER_FAILED")+d);break;case v.Errors.NotDisplayedError:a.ErrorMessage&&""!==a.ErrorMessage&&this.showError(a.ErrorMessage);break;default:b&&b.length>0?this.showError(b+d):a.ErrorMessage&&""!==a.ErrorMessage&&this.showError(a.ErrorMessage)}},h.prototype.setData=function(a,b){Data.setVar(a,b)},h.prototype.removeData=function(a){Data.setVar(a,"")},h.prototype.getData=function(a){return Data.getVar(a)},h.prototype.hasData=function(a){return Data.hasVar(a)},i.prototype.onShow=function(a,b,c,d){this.alertDesc(a),this.closeCallback=b||null,this.title(c||""),this.okButtonText(d||w.i18n("MAIN/BUTTON_OK"))},i.prototype.popupTemplate=function(){return"Popups_AlertPopupViewModel"},i.prototype.onEnterHandler=function(){this.close()},i.prototype.close=function(){w.isFunc(this.closeCallback)&&this.closeCallback(),this.closeCommand()},j.prototype.onShow=function(a,b,c,d,e){this.title(c||""),this.okButtonText(d||w.i18n("MAIN/BUTTON_OK")),this.cancelButtonText(e||w.i18n("MAIN/BUTTON_CANCEL")),w.isFunc(b)&&(this.fConfirmCallback=b,this.confirmDesc(a))},j.prototype.popupTemplate=function(){return"Popups_ConfirmPopupViewModel"},j.prototype.onEnterHandler=function(){this.yesClick()},j.prototype.yesClick=function(){this.fConfirmCallback&&this.fConfirmCallback(!0),this.closeCommand()},j.prototype.noClick=function(){this.fConfirmCallback&&this.fConfirmCallback(!1),this.closeCommand()},k.prototype.onShow=function(a){this.folderNameFocus(!0),w.isFunc(a)&&(this.fCallback=a)},k.prototype.popupTemplate=function(){return"Popups_FileStorageFolderCreatePopupViewModel"},k.prototype.onOKClick=function(){this.fCallback&&(this.fCallback(this.folderName()),this.folderName("")),this.closeCommand()},k.prototype.onCancelClick=function(){this.closeCommand()},l.prototype.onShow=function(a,b){this.item=a,this.name=this.item.nameForEdit,this.nameFocus(!0),w.isFunc(b)&&(this.fCallback=b)},l.prototype.popupTemplate=function(){return"Popups_FileStorageRenamePopupViewModel"},l.prototype.onOKClick=function(){this.fCallback&&this.fCallback(this.item),this.closeCommand()},l.prototype.onCancelClick=function(){this.closeCommand()},m.prototype.onShow=function(a){this.item=a,this.pub(""),y.Ajax.send({Action:"FilesMin",Account:A.Accounts.defaultId(),Type:a.storageType(),Path:a.path(),Name:a.fileName(),Size:a.size(),IsFolder:a.isFolder()},this.onFilesMinResponse,this)},m.prototype.onFilesMinResponse=function(a,b){if(a.Result){var c=b.IsFolder?"?files-pub=":A.App.ServerUseUrlRewrite?"share/":"?/Min/Share/";this.pub(w.getAppPath()+c+a.Result),this.pubFocus(!0),this.item.shared(!0)}},m.prototype.popupTemplate=function(){return"Popups_FileStorageSharePopupViewModel"},m.prototype.onOKClick=function(){this.closeCommand()},m.prototype.onFilesMinDeleteResponse=function(){this.closeCommand()},m.prototype.onCancelSharingClick=function(){this.item&&(y.Ajax.send({Action:"FilesMinDelete",Account:A.Accounts.defaultId(),Type:this.item.storageType(),Path:this.item.path(),Name:this.item.fileName()},this.onFilesMinDeleteResponse,this),this.item.shared(!1))},n.prototype.getSaveMailInSentItems=function(){var a=!0;switch(this.SaveMail){case v.SaveMail.Unchecked:a=!1;break;case v.SaveMail.Checked:case v.SaveMail.Hidden:a=!0}return a},n.prototype.getUseSaveMailInSentItems=function(){var a=!1;switch(this.SaveMail){case v.SaveMail.Unchecked:case v.SaveMail.Checked:a=!0;break;case v.SaveMail.Hidden:a=!1}return a},n.prototype.parse=function(a){var b=null;null!==a&&(this.IdUser=w.pInt(a.IdUser),this.MailsPerPage=w.pInt(a.MailsPerPage),this.ContactsPerPage=w.pInt(a.ContactsPerPage),this.AutoCheckMailInterval=w.pInt(a.AutoCheckMailInterval),this.DefaultEditor=w.pInt(a.DefaultEditor),this.Layout=w.pInt(a.Layout),this.DefaultTheme=w.pString(a.DefaultTheme),this.DefaultLanguage=w.pString(a.DefaultLanguage),this.DefaultDateFormat=w.pString(a.DefaultDateFormat),this.defaultTimeFormat(w.pInt(a.DefaultTimeFormat)),this.ThreadsEnabled=!!a.ThreadsEnabled,this.useThreads(!!a.UseThreads),this.SaveRepliedToCurrFolder=!!a.SaveRepliedMessagesToCurrentFolder,this.AllowCompose=!!a.AllowCompose,this.AllowReply=!!a.AllowReply,this.AllowForward=!!a.AllowForward,this.SaveMail=w.pInt(a.SaveMail),this.AllowFetcher=!!a.AllowFetcher,this.OutlookSyncEnable=!!a.OutlookSyncEnable,this.MobileSyncEnable=!!a.MobileSyncEnable,this.ShowPersonalContacts=!!a.ShowPersonalContacts,this.ShowGlobalContacts=!!a.ShowGlobalContacts,this.ShowContacts=this.ShowPersonalContacts||this.ShowGlobalContacts,this.IsFilesSupported=!!a.IsFilesSupported&&!C,this.IsHelpdeskSupported=!!a.IsHelpdeskSupported&&!C,this.IsHelpdeskAgent=!!a.IsHelpdeskAgent,this.LastLogin=w.pInt(a.LastLogin),this.AllowCalendar=!!a.AllowCalendar&&!C,this.CalendarSharing=!!a.CalendarSharing,this.CalendarAppointments=!!a.CalendarAppointments,this.IsDemo=!!a.IsDemo,this.AllowVoice=!!a.AllowVoice,this.VoiceRealm=a.VoiceRealm,this.VoiceWebsocketProxyUrl=a.VoiceWebsocketProxyUrl,this.VoiceOutboundProxyUrl=a.VoiceOutboundProxyUrl,this.VoiceCallerID=a.VoiceCallerID,this.VoiceImpi=a.VoiceImpi,this.VoiceImpu=a.VoiceImpu,this.VoicePassword=a.VoicePassword,this.VoiceProvider=a.VoiceRealm,this.AllowHelpdeskNotifications=a.AllowHelpdeskNotifications,b=a.Calendar,b&&(this.CalendarShowWeekEnds=!!b.ShowWeekEnds,this.CalendarShowWorkDay=!!b.ShowWorkDay,this.CalendarWorkDayStarts=w.pInt(b.WorkDayStarts),this.CalendarWorkDayEnds=w.pInt(b.WorkDayEnds),this.CalendarWeekStartsOn=w.pInt(b.WeekStartsOn),this.CalendarDefaultTab=w.pInt(b.DefaultTab)))},n.prototype.updateCommonSettings=function(a,b,c,d,e,f,g,h,i,j,k){(this.DefaultTheme!==f||this.DefaultLanguage!==g||this.DefaultDateFormat!==h||this.defaultTimeFormat()!==i)&&this.needToReloadCalendar(!0),this.MailsPerPage=a,this.ContactsPerPage=b,this.AutoCheckMailInterval=c,y.MailCache.setAutocheckmailTimer(),this.DefaultEditor=d,this.Layout=e,this.DefaultTheme=f,this.DefaultLanguage=g,this.DefaultDateFormat=h,this.defaultTimeFormat(i),this.useThreads("1"===j),this.SaveRepliedToCurrFolder="1"===k},n.prototype.updateCalendarSettings=function(a,b,c,d,e,f){(this.CalendarShowWeekEnds!==a||this.CalendarShowWorkDay!==b||this.CalendarWorkDayStarts!==c||this.CalendarWorkDayEnds!==d||this.CalendarWeekStartsOn!==e||this.CalendarDefaultTab!==f)&&this.needToReloadCalendar(!0),this.CalendarShowWeekEnds=a,this.CalendarShowWorkDay=b,this.CalendarWorkDayStarts=c,this.CalendarWorkDayEnds=d,this.CalendarWeekStartsOn=e,this.CalendarDefaultTab=f},n.prototype.updateHelpdeskSettings=function(a){this.AllowHelpdeskNotifications=a},n.prototype.isNeedToReloadCalendar=function(){var a=this.needToReloadCalendar();return this.needToReloadCalendar(!1),a},n.prototype.onSyncSettingsResponse=function(a){a.Result?(this.mobileSync(a.Result.Mobile),this.outlookSync(a.Result.Outlook)):y.Api.showErrorByCode(a)},n.prototype.requestSyncSettings=function(){(null===this.mobileSync()||null===this.outlookSync())&&y.Ajax.send({Action:"SyncSettings"},this.onSyncSettingsResponse,this)},o.prototype.parse=function(a){this.oMoment=moment.unix(a)},o.prototype.setDate=function(a,b,c){this.oMoment=moment([a,b,c])},o.prototype.getTimeFormat=function(){return A.User.defaultTimeFormat()===v.TimeFormat.F24?"HH:mm":"hh:mm A"},o.prototype.getFullDate=function(){return this.oMoment?this.oMoment.format("ddd, MMM D, YYYY, "+this.getTimeFormat()):""},o.prototype.getMidDate=function(){return this.getShortDate(!0)},o.prototype.getShortDate=function(a){var b="",c=null;return this.oMoment&&(c=moment(),c.format("L")===this.oMoment.format("L")?b=this.oMoment.format(this.getTimeFormat()):(b=c.clone().subtract("days",1).format("L")===this.oMoment.format("L")?w.i18n("DATETIME/YESTERDAY"):c.year()===this.oMoment.year()?this.oMoment.format("MMM D"):this.oMoment.format("MMM D, YYYY"),(w.isUnd(a)?1:!a)||(b+=", "+this.oMoment.format(this.getTimeFormat())))),b},o.prototype.getDate=function(){return this.oMoment?this.oMoment.format("ddd, MMM D, YYYY"):""},o.prototype.getTime=function(){return this.oMoment?this.oMoment.format(this.getTimeFormat()):""},o.prototype.convertDate=function(a){var b=w.getDateFormatForMoment(A.User.DefaultDateFormat)+" "+this.getTimeFormat();return moment(1e3*a).format(b)},p.prototype.dataObjectName="",p.prototype.isVisibleViewLink=function(){return this.uploaded()&&!this.uploadError()&&this.isViewMimeType()},p.prototype.parse=function(a,b){a["@Object"]===this.dataObjectName&&(this.fileName(w.pString(a.FileName)),this.tempName(w.pString(a.TempName)),""===this.tempName()&&this.tempName(this.fileName()),this.type(w.pString(a.MimeType)),this.size(a.EstimatedSize?parseInt(a.EstimatedSize,10):parseInt(a.SizeInBytes,10)),this.thumb(!!a.Thumb),this.hash(w.pString(a.Hash)),this.accountId(b),this.allowExpandSubFiles(!!a.Expand),this.uploadUid(this.hash()),this.uploaded(!0),w.isFunc(this.additionalParse)&&this.additionalParse(a))},p.prototype.getInThumbQueue=function(a){this.thumbnailSessionUid(a),this.thumb()&&(!this.linked||this.linked&&!this.linked())&&w.thumbQueue(this.thumbnailSessionUid(),this.thumbnailLink(),this.thumbnailSrc)},p.prototype.downloadFile=function(a){a&&a.Api&&a.Api.downloadByUrl||(a=y),a&&this.downloadLink().length>0&&"#"!==this.downloadLink()&&a.Api.downloadByUrl(this.downloadLink())},p.prototype.onExpandAttachmentResponse=function(a){this.subFiles([]),w.isNonEmptyArray(a.Result)&&(_.each(a.Result,_.bind(function(a){var b=this.getInstance();a["@Object"]=this.dataObjectName,b.parse(a,this.accountId()),this.subFiles.push(b)},this)),this.subFilesLoaded(!0),this.subFilesCollapsed(!0)),this.subFilesStartedLoading(!1)},p.prototype.expandFile=function(){this.subFilesLoaded()?this.subFilesCollapsed(!0):(this.subFilesStartedLoading(!0),y.Ajax.send({Action:"ExpandAttachment",RawKey:this.hash()},this.onExpandAttachmentResponse,this))},p.prototype.collapseFile=function(){this.subFilesCollapsed(!1)},p.prototype.getInstance=function(){return new p},p.prototype.viewFile=function(){this.viewCommonFile()},p.prototype.viewCommonFile=function(){var a=null,b=w.getAppPath()+this.viewLink();this.visibleViewLink()&&this.viewLink().length>0&&"#"!==this.viewLink()&&(b=w.getAppPath()+this.viewLink(),a=w.WindowOpener.open(b,b,!1),a&&a.focus())},p.prototype.eventDragStart=function(a,b){var c=b.originalEvent||b;return a&&c&&c.dataTransfer&&c.dataTransfer.setData&&c.dataTransfer.setData("DownloadURL",this.generateTransferDownloadUrl()),!0},p.prototype.generateTransferDownloadUrl=function(){var a=this.downloadLink();return"http"!==a.substr(0,4)&&(a=b.location.protocol+"//"+b.location.host+b.location.pathname+a),this.type()+":"+this.fileName()+":"+a},p.prototype.onUploadSelect=function(a,b){this.fileName(b.FileName),this.type(b.Type),this.size(w.pInt(b.Size)),this.uploadUid(a),this.uploaded(!1),this.visibleSpinner(!1),this.statusText(""),this.progressPercent(0),this.visibleProgress(!1)},p.prototype.onUploadStart=function(){this.visibleSpinner(!0),this.visibleProgress(!0)},p.prototype.onUploadProgress=function(a,b){b>0&&(this.progressPercent(Math.ceil(a/b*100)),this.visibleProgress(!0))},p.prototype.onUploadComplete=function(a,b,c){var d=!b||!c||c.Error||!1,e=c&&"size"===c.Error?w.i18n("COMPOSE/UPLOAD_ERROR_SIZE"):w.i18n("COMPOSE/UPLOAD_ERROR_UNKNOWN");this.visibleSpinner(!1),this.progressPercent(0),this.visibleProgress(!1),this.uploaded(!0),this.uploadError(d),this.statusText(d?e:w.i18n("COMPOSE/UPLOAD_COMPLETE")),d||(this.fillDataAfterUploadComplete(c,a),setTimeout(function(a){return function(){a.statusText("")}}(this),3e3))},p.prototype.fillDataAfterUploadComplete=function(){},p.prototype.onImageLoad=function(){this.thumb()&&!this.thumbnailLoaded()&&(this.thumbnailLoaded(!0),w.thumbQueue(this.thumbnailSessionUid()))},w.extend(q,p),q.prototype.getInstance=function(){return new q},q.prototype.parse=function(a,b){var c=new o;this.isFolder(!!a.IsFolder),this.fileName(w.pString(a.Name)),this.path(w.pString(a.Path)),this.storageType(w.pInt(a.Type)),this.shared(!!a.Shared),this.isFolder()||(this.size(w.pInt(a.Size)),c.parse(a.LastModified),this.lastModified(c.getShortDate()),this.owner(w.pString(a.Owner)),this.thumb(!!a.Thumb),this.hash(w.pString(a.Hash)),this.publicHash(b)),this.thumb()&&w.thumbQueue(this.thumbnailSessionUid(),this.thumbnailLink(),this.thumbnailSrc)},q.prototype.onUploadSelectOwn=function(a,b,c,d,e,f){var g=new o,h=new Date;this.onUploadSelect(a,b),g.parse(h.getTime()/1e3),this.fileName(c),this.lastModified(g.getShortDate()),this.owner(d),this.path(e),this.storageType(f)},r.prototype.__name="CFileStorageViewModel",r.prototype.onApplyBindings=function(b){this.selector.initOnApplyBindings(".items_sub_list .item",".items_sub_list .selected.item",".items_sub_list .item .custom_checkbox",a(".panel.files .items_list",b),a(".panel.files .items_list .scroll-inner",b)),this.initUploader(),this.hotKeysBind()},r.prototype.hotKeysBind=function(){var b=y.Screens.currentScreen()===v.Screens.FileStorage;a(document).on("keydown",_.bind(function(a){b&&a&&a.keyCode===v.Key.s&&this.selector.useKeyboardKeys()&&!w.isTextFieldFocused()&&(a.preventDefault(),this.isSearchFocused(!0))},this))},r.prototype.initUploader=function(){var a=this;this.uploaderButton()&&this.uploaderArea()&&(this.oJua=new Jua({action:"?/Upload/File/",name:"jua-uploader",queueSize:2,clickElement:this.uploaderButton(),dragAndDropElement:this.uploaderArea(),disableAjaxUpload:this.isPublic?!0:!1,disableFolderDragAndDrop:this.isPublic?!0:!1,disableDragAndDrop:this.isPublic?!0:!1,hidden:{Token:function(){return A.Token},AccountID:function(){return A.Accounts.currentId()},AdditionalData:function(b){return JSON.stringify({Type:a.storageType(),SubPath:b&&!w.isUnd(b.Folder)?b.Folder:"",Path:a.dropPath()})}}}),this.oJua.on("onProgress",_.bind(this.onFileUploadProgress,this)).on("onSelect",_.bind(this.onFileUploadSelect,this)).on("onStart",_.bind(this.onFileUploadStart,this)).on("onDrop",_.bind(this.onDrop,this)).on("onComplete",_.bind(this.onFileUploadComplete,this)).on("onBodyDragEnter",_.bind(this.bDragActive,this,!0)).on("onBodyDragLeave",_.bind(this.bDragActive,this,!1)))},r.prototype.onFileUploadSelect=function(a,b){if(A.App.FileSizeLimit>0&&b.Size/1048576>A.App.FileSizeLimit)return y.Screens.showPopup(i,[w.i18n("FILESTORAGE/ERROR_SIZE_LIMIT",{SIZE:A.App.FileSizeLimit})]),!1;if(""===this.searchPattern()){var c=new q,d=b.FileName,e=w.getFileExtension(d),f=w.getFileNameWithoutExtension(d),g=0,h=A.Accounts.getDefault();for(""!==e&&(e="."+e);!w.isUnd(this.getFileByName(d));)d=f+"_"+g+e,g++;c.onUploadSelectOwn(a,b,d,h.email(),this.path(),this.storageType()),this.uploadingFiles.push(c)}},r.prototype.onFileUploadStart=function(a){var b=this.getUploadFileByUid(a);b&&b.onUploadStart()},r.prototype.onFileUploadProgress=function(a,b,c){if(""===this.searchPattern()){var d=this.getUploadFileByUid(a);d&&d.onUploadProgress(b,c)}},r.prototype.onFileUploadComplete=function(a,b,c){if(""===this.searchPattern()){var d=this.getUploadFileByUid(a);d&&(d.onUploadComplete(a,b,c),this.deleteUploadFileByUid(a),d.uploadError()?(this.uploadError(!0),y.Api.showError(d.statusText())):(this.files.push(d),0===this.uploadingFiles().length&&y.Api.showReport(w.i18n("COMPOSE/UPLOAD_COMPLETE")))),this.getFiles(this.storageType(),this.getPathByIndex(this.iPathIndex()),this.searchPattern(),!1)}},r.prototype.onDrop=function(a,b){if(!this.isPublic)if(b&&b.target&&""===this.searchPattern()){var d=c.dataFor(b.target);d&&d instanceof q&&d.isFolder()&&this.dropPath(this.path()+"/"+d.fileName())}else y.Api.showReport(w.i18n("FILESTORAGE/INFO_CANNOT_UPLOAD_SEARCH_RESULT"))},r.prototype.filesDrop=function(a,b,c){if(!this.isPublic&&a&&b){var d=this,e=""!==a.fileName()?a.path()+"/"+a.fileName():a.path(),f=b.ctrlKey?"FilesCopy":"FilesMove",g=[],h=[];(this.path()!==e&&this.storageType()===a.storageType()||this.storageType()!==a.storageType())&&(a.recivedAnim(!0),w.uiDropHelperAnim(b,c),g=this.selector.listCheckedAndSelected(),h=_.map(g,function(a){return b.ctrlKey||(a.isFolder()?d.deleteFolderByName(a.fileName()):d.deleteFileByName(a.fileName())),{Name:a.fileName(),IsFolder:a.isFolder()}}),y.Ajax.send({Action:f,FromType:this.storageType(),ToType:a.storageType(),FromPath:this.path(),ToPath:e,Files:JSON.stringify(h)},this.onFilesMoveResponse,this))}},r.prototype.onFilesMoveResponse=function(){this.getQuota(this.storageType())},r.prototype.dragAndDropHelper=function(b){b&&b.checked(!0);var c=w.draggableMessages(),d=this.selector.listCheckedAndSelected(),e=d.length,f=0,g=0,h="";return _.each(d,function(a){a.isFolder()?g++:f++},this),0!==f&&0!==g?h=w.i18n("FILESTORAGE/DRAG_ITEMS_TEXT_PLURAL",{COUNT:e},null,e):0===f?h=w.i18n("FILESTORAGE/DRAG_FOLDERS_TEXT_PLURAL",{COUNT:g},null,g):0===g&&(h=w.i18n("FILESTORAGE/DRAG_TEXT_PLURAL",{COUNT:f},null,f)),a(".count-text",c).text(h),c},r.prototype.onItemDelete=function(){this.executeDelete()},r.prototype.onEnter=function(a){this.onItemDblClick(a)},r.prototype.onItemDblClick=function(a){a&&(a.isFolder()?(this.isPublic||this.aPath(this.getCollectionFromPath(a.path())),this.getFiles(this.storageType(),a.fileName())):a.isViewable()?a.viewFile():a.downloadFile())},r.prototype.onFilesResponse=function(a,b){if(a.Result){var c=[],d=[],e=Date.now().toString();a.Result.Quota&&(this.quota(a.Result.Quota[0]+a.Result.Quota[1]),this.used(a.Result.Quota[0])),_.each(a.Result.Items,function(a){var b=new q;b.parse(a,this.publicHash),b.getInThumbQueue(e),b.isFolder()?c.push(b):d.push(b)},this),(this.isPublic||b.Type===this.storageType())&&(this.folders(c),this.files(d)),this.loading(!1)}},r.prototype.onQuotaResponse=function(a){a.Result&&a.Result.Quota&&(this.quota(a.Result.Quota[0]+a.Result.Quota[1]),this.used(a.Result.Quota[0]))},r.prototype.onFilesDeleteResponse=function(){this.getFiles(this.storageType(),this.getPathByIndex(this.iPathIndex()),this.searchPattern())},r.prototype.executeRename=function(){if(!this.isPublic){var a=_.bind(this.renameItem,this),b=this.selector.listCheckedAndSelected();b[0]&&y.Screens.showPopup(l,[b[0],a])}},r.prototype.executeDownload=function(){var a=this.selector.listCheckedAndSelected();a[0]&&!a[0].isFolder()&&a[0].downloadFile()},r.prototype.executeShare=function(){if(!this.isPublic){var a=this.selector.listCheckedAndSelected();a[0]&&y.Screens.showPopup(m,[a[0]])}},r.prototype.executeSend=function(){var a=this.selector.listCheckedAndSelected(),b=_.filter(a,function(a){return!a.isFolder()},this);b.length>0&&y.Routing.goDirectly(y.Links.compose(),["file",b])},r.prototype.onShareIconClick=function(a){a&&y.Screens.showPopup(m,[a])},r.prototype.renameItem=function(a){y.Ajax.send({Action:"FilesRename",Type:this.storageType(),Path:a.path(),Name:a.fileName(),NewName:a.nameForEdit()},this.onFilesRenameResponse,this)},r.prototype.onFilesRenameResponse=function(){this.getFiles(this.storageType(),this.getPathByIndex(this.iPathIndex()),this.searchPattern())},r.prototype.executeDelete=function(){if(!this.isPublic){var a=this.selector.listCheckedAndSelected(),b=w.i18n("FILESTORAGE/CONFIRMATION_DELETE"),c=_.bind(this.deleteItems,this,a);a&&a.length>0&&y.Screens.showPopup(j,[b,c])}},r.prototype.onShow=function(){this.getGroups();var a="";this.isPublic||(a=this.getPathByIndex(this.iPathIndex())),this.getFiles(this.storageType(),a),this.selector.useKeyboardKeys(!0),this.oJua&&this.oJua.setDragAndDropEnabledStatus(!0)},r.prototype.onHide=function(){this.selector.useKeyboardKeys(!1),this.oJua&&this.oJua.setDragAndDropEnabledStatus(!1)},r.prototype.getQuota=function(a){y.Ajax.send({Action:"FilesQuota",Type:a},this.onQuotaResponse,this)},r.prototype.getGroups=function(){var a=null;this.groups.removeAll(),this.isPublic||(a=new q,a.storageType(v.FileStorageType.Private).displayName(w.i18n("FILESTORAGE/TAB_PRIVATE_FILES")).isFolder(!0),this.groups.push(a),a=new q,a.storageType(v.FileStorageType.Corporate).displayName(w.i18n("FILESTORAGE/TAB_CORPORATE_FILES")).isFolder(!0),this.groups.push(a),A.App.AllowFilesSharing&&(a=new q,a.storageType(v.FileStorageType.Shared).displayName(w.i18n("FILESTORAGE/TAB_SHARED_FILES")).isFolder(!0),this.groups.push(a)))},r.prototype.getFiles=function(a,b,c,d){if(this.isPublic)return this.getFilesPub(b);this.lastPath(this.path()),(w.isUnd(d)||!w.isUnd(d)&&d)&&this.loading(!0),c=w.isUnd(c)?"":w.pString(c),this.storageType(a),this.searchPattern(c);var e=new q;w.isUnd(b)||""===b?(this.aPath.removeAll(),e.displayName(this.rootPath())):e.fileName(b),e.path(this.getFullPathByIndex(this.aPath().length)).storageType(a).isFolder(!0),this.aPath.push(e),this.iPathIndex(this.aPath().length-1),this.lastPath()!==this.path()&&(this.folders([]),this.files([])),y.Ajax.sendExt({Action:"Files",Type:a,Path:this.path(),Pattern:this.searchPattern()},this.onFilesResponse,this)},r.prototype.getFilesPub=function(a){this.lastPath(this.path());var b=new q;w.isUnd(a)||""===a?(this.aPath.removeAll(),b.displayName(this.rootPath())):b.fileName(a),b.path(this.getFullPathByIndex(this.aPath().length)).isFolder(!0),this.aPath.push(b),this.iPathIndex(this.aPath().length-1),this.lastPath()!==this.path()&&(this.folders([]),this.files([])),y.Ajax.sendExt({Action:"FilesPub",Hash:A.FileStoragePubHash,Path:this.path()},this.onFilesResponse,this)},r.prototype.deleteItems=function(a,b){if(b&&0<a.length){var c=_.map(a,function(a){return a.deleted(!0),{Path:a.path(),Name:a.fileName()}});y.Ajax.send({Action:"FilesDelete",Type:this.storageType(),Path:this.path(),Items:JSON.stringify(c)},this.onFilesDeleteResponse,this)}},r.prototype.getPathByIndex=function(a){var b=this.aPath()[a],c="";return this.aPath(this.aPath().slice(0,a)),b&&(c=b.fileName()),c},r.prototype.getFullPathByIndex=function(a){var b=_.map(this.aPath().slice(0,a),function(a){return a.fileName()});return b.join("/")},r.prototype.getCollectionFromPath=function(a){var b=[],c=[],d=null,e=[],f="",g=[],h="";return""!==a?(c=a.split("/"),_.each(c,function(a){if(h=a,""===a){if(this.isPublic)return;h=this.rootPath()}e.push(a),g=e.slice(0,-1),f=g.join("/"),d=new q,d.fileName(a).displayName(h).isFolder(!0).path(f).storageType(this.storageType()),b.push(d)},this)):(d=new q,d.displayName(this.rootPath()).isFolder(!0).storageType(this.storageType()),b.push(d)),b},r.prototype.getFileByName=function(a){return _.find(this.files(),function(b){return b.fileName()===a})},r.prototype.deleteFileByName=function(a){var b=_.filter(this.files(),function(b){return b.fileName()!==a});this.files(b)},r.prototype.deleteFolderByName=function(a){var b=_.filter(this.folders(),function(b){return b.fileName()!==a});this.folders(b)},r.prototype.getUploadFileByUid=function(a){return _.find(this.uploadingFiles(),function(b){return b.uploadUid()===a})},r.prototype.deleteUploadFileByUid=function(a){var b=_.filter(this.uploadingFiles(),function(b){return b.uploadUid()!==a});this.uploadingFiles(b)},r.prototype.getUploadingFiles=function(){var a=[],b=this.uploadingFiles(),c=this;return w.isUnd(b)||(a=_.filter(b,function(a){return a.path()===c.path()&&a.storageType()===c.storageType()})),a},r.prototype.onCancelUpload=function(a){this.oJua&&this.oJua.cancel(a),this.deleteUploadFileByUid(a)},r.prototype.onCreateFolderResponse=function(){this.getFiles(this.storageType(),this.getPathByIndex(this.iPathIndex()))},r.prototype.createFolder=function(a){y.Ajax.send({Action:"FilesFolderCreate",Type:this.storageType(),Path:this.path(),FolderName:a},this.onCreateFolderResponse,this)},r.prototype.onCreateFolderClick=function(){var a=_.bind(this.createFolder,this);y.Screens.showPopup(k,[a])},r.prototype.onSearch=function(){this.getFiles(this.storageType(),this.getPathByIndex(this.iPathIndex()),this.searchPattern())},r.prototype.clearSearch=function(){this.getFiles(this.storageType(),this.getPathByIndex(this.iPathIndex()))},s.prototype.showLoading=function(a){a&&""!==a?this.loadingMessage(a):this.loadingMessage(w.i18n("MAIN/LOADING")),this.loadingVisible(!0)},s.prototype.hideLoading=function(){this.loadingVisible(!1)},s.prototype.showReport=function(a,b){var c=this;b=b||5e3,a&&""!==a?(this.reportMessage(a),this.reportVisible(!0),isNaN(this.iReportTimeout)||clearTimeout(this.iReportTimeout),this.iReportTimeout=setTimeout(function(){c.reportVisible(!1)},b)):this.reportVisible(!1)},s.prototype.showError=function(a,b,c,d){var e=this;c=!0,a&&""!==a?(this.gray(!!d),this.errorNotHide(!!c),this.errorMessage(a),this.errorVisible(!0),this.isHtmlError(b),clearTimeout(this.iErrorTimeout),c||(this.iErrorTimeout=setTimeout(function(){e.errorVisible(!1)},5e3))):this.errorVisible(!1)},s.prototype.selfHideError=function(){this.errorVisible(!1)},s.prototype.hideError=function(a){a=!!a,this.gray()===a&&this.errorVisible(!1)},t.prototype.initScreens=function(){},t.prototype.initLayout=function(){},t.prototype.init=function(){this.initScreens(),this.initLayout(),a("#pSevenContent").addClass("single_mode"),_.defer(function(){A.SingleMode||a("#pSevenContent").removeClass("single_mode")}),this.informationScreen(this.showNormalScreen(v.Screens.Information))},t.prototype.showCurrentScreen=function(a,b){this.currentScreen()!==a&&(this.hideCurrentScreen(),this.currentScreen(a)),this.showNormalScreen(a,b)},t.prototype.hideCurrentScreen=function(){this.currentScreen().length>0&&this.hideScreen(this.currentScreen())},t.prototype.hideScreen=function(a){var b=a,c=this.oScreens[b];"undefined"!=typeof c&&c.bInitialized&&c.Model.hideViewModel()},t.prototype.showNormalScreen=function(a,b){var c=a,d=this.oScreens[c];return d&&(d.bInitialized="boolean"!=typeof d.bInitialized?!1:d.bInitialized,d.bInitialized||(d.Model=this.initViewModel(d.Model,d.TemplateName),d.bInitialized=!0),d.Model.showViewModel(b)),d?d.Model:null},t.prototype.initViewModel=function(b,d){var e=null,f=null;return e=new b,f=a('div[data-view-model="'+d+'"]').attr("data-bind","template: {name: '"+d+"'}").hide(),e.$viewModel=f,e.bShown=!1,e.showViewModel=function(a){this.$viewModel.show(),"function"==typeof this.onRoute&&this.onRoute(a),this.bShown||("function"==typeof this.onShow&&this.onShow(a),z.runPluginHook&&this.__name&&z.runPluginHook("view-model-on-show",[this.__name,this]),this.bShown=!0)},e.hideViewModel=function(){this.$viewModel.hide(),"function"==typeof this.onHide&&this.onHide(),this.bShown=!1},c.applyBindings(e,f[0]),"function"==typeof e.onApplyBindings&&e.onApplyBindings(f),e},t.prototype.showPopup=function(b,d){if(b){if(!b.__builded){var e=null,f=new b,g=f.popupTemplate?f.popupTemplate():"";""!==g&&(e=a('div[data-view-model="'+g+'"]').attr("data-bind","template: {name: '"+g+"'}").removeClass("visible").hide(),e&&1===e.length&&(f.visibility=c.observable(!1),b.__builded=!0,b.__vm=f,f.$viewModel=e,b.__dom=e,f.showViewModel=w.createCommand(f,function(){y&&y.Screens&&y.Screens.showPopup(b)}),f.closeCommand=w.createCommand(f,function(){y&&y.Screens&&y.Screens.hidePopup(b)}),c.applyBindings(f,e[0]),w.delegateRun(f,"onApplyBindings",[e])))}b.__vm&&b.__dom&&(b.__dom.show(),_.delay(function(){b.__dom.addClass("visible")},50),b.__vm.visibility(!0),w.delegateRun(b.__vm,"onShow",d),this.popupVisibility(!0),this.popups.push(b),this.keyupPopupBinded=_.bind(this.keyupPopup,this,b.__vm),a(document).on("keyup",this.keyupPopupBinded))}},t.prototype.keyupPopup=function(a,c){if(c){var d=b.parseInt(c.keyCode,10);27===d&&a.closeCommand(),13!==d&&32!==d||!a.onEnterHandler||a.onEnterHandler()}},t.prototype.hidePopup=function(b){b&&b.__vm&&b.__dom&&(this.keyupPopupBinded&&(a(document).off("keyup",this.keyupPopupBinded),this.keyupPopupBinded=void 0),b.__dom.removeClass("visible").hide(),b.__vm.visibility(!1),w.delegateRun(b.__vm,"onHide"),this.popupVisibility(!1),this.popups=_.without(this.popups,b))},t.prototype.hideAllPopup=function(){_.each(this.popups,function(a){this.hidePopup(a)},this)},t.prototype.showLoading=function(a){this.informationScreen()&&this.informationScreen().showLoading(a)},t.prototype.hideLoading=function(){this.informationScreen()&&this.informationScreen().hideLoading()},t.prototype.showReport=function(a,b){this.informationScreen()&&this.informationScreen().showReport(a,b)},t.prototype.showError=function(a,b,c,d){this.informationScreen()&&this.informationScreen().showError(a,b,c,d)},t.prototype.hideError=function(a){this.informationScreen()&&this.informationScreen().hideError(a)},t.prototype.initScreens=function(){this.oScreens[v.Screens.Information]={Model:s,TemplateName:"Common_InformationViewModel"},this.oScreens[v.Screens.FileStorage]={Model:r,TemplateName:"FileStorage_FileStorageViewModel"}},t.prototype.initLayout=function(){a("#pSevenContent").append(a("#FileStoragePubLayout").html())},u.prototype.setTitle=function(a){document.title=".",document.title=a||""},u.prototype.init=function(){A.User=new n,A.Accounts={currentId:function(){return 0
},defaultId:function(){return 0},hasAccountWithId:function(){return!0},getDefault:function(){}},A.App={DateFormats:""},y.MailCache={executeCheckMail:function(){}},y.Routing={buildHashFromArray:function(){},setHash:function(){}},y.Links={composeWithToField:function(){}}},u.prototype.tokenProblem=function(){var a="window.location.reload(); return false;",b=w.i18n("WARNING/TOKEN_PROBLEM_HTML",{RELOAD_FUNC:a});A.Auth=!1,y.Api.showError(b,!0,!0)},u.prototype.authProblem=function(){},u.prototype.run=function(){this.Screens.init(),this.Screens.showCurrentScreen(v.Screens.FileStorage)},y=new u,b.App=y,-1===A.IsMobile){var I=b.matchMedia("all and (min-width: 768px)").matches?0:1;b.App.Ajax.send({Action:"SetMobile",Mobile:I},function(){I?b.location.reload():a(function(){_.defer(function(){y.run()})})},this)}else a(function(){_.defer(function(){y.run()})});b.AfterLogicApi=z,b.Enums=v,D.removeClass("no-js").addClass("js"),D.hasClass("pdf")&&(H.push("application/pdf"),H.push("application/x-pdf"))}(jQuery,window,ko,crossroads,hasher);